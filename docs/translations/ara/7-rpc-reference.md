[โ ุงูุณุงุจู: ูุนููุงุช ุงูุดุจูุฉ](6-network-parameters.md) | [๐ ุฌุฏูู ุงููุญุชููุงุช](index.md) | [ุงูุชุงูู: ุฏููู ุงููุญูุธุฉ โ](8-wallet-guide.md)

---

# ุงููุตู ุงูุณุงุจุน: ูุฑุฌุน ูุงุฌูุฉ RPC

ูุฑุฌุน ูุงูู ูุฃูุงูุฑ RPC ูู Bitcoin-PoCXุ ุจูุง ูู ุฐูู RPCs ุงูุชุนุฏููุ ูุฅุฏุงุฑุฉ ุงูุชุนูููุงุชุ ู RPCs ุณูุณูุฉ ุงููุชู ุงูููุนุฏููุฉ.

---

## ุฌุฏูู ุงููุญุชููุงุช

1. [ุงูุชูููู](#ุงูุชูููู)
2. [RPCs ุชุนุฏูู PoCX](#rpcs-ุชุนุฏูู-pocx)
3. [RPCs ุงูุชุนููู](#rpcs-ุงูุชุนููู)
4. [RPCs ุณูุณูุฉ ุงููุชู ุงูููุนุฏููุฉ](#rpcs-ุณูุณูุฉ-ุงููุชู-ุงูููุนุฏููุฉ)
5. [RPCs ุงูููุนุทููุฉ](#rpcs-ุงูููุนุทููุฉ)
6. [ุฃูุซูุฉ ุงูุชูุงูู](#ุฃูุซูุฉ-ุงูุชูุงูู)

---

## ุงูุชูููู

### ูุถุน ุฎุงุฏู ุงูุชุนุฏูู

**ุงูุนูููู**: `-miningserver`

**ุงูุบุฑุถ**: ูููุนูู ูุตูู RPC ููููุนุฏูููู ุงูุฎุงุฑุฌููู ูุงุณุชุฏุนุงุก RPCs ุงูุฎุงุตุฉ ุจุงูุชุนุฏูู

**ุงููุชุทูุจุงุช**:
- ูุทููุจ ูุนูู `submit_nonce`
- ูุทููุจ ูุธููุฑ ุญูุงุฑ ุชุนููู ุงูุตูุงุบุฉ ูู ูุญูุธุฉ Qt

**ุงูุงุณุชุฎุฏุงู**:
```bash
# ุณุทุฑ ุงูุฃูุงูุฑ
./bitcoind -miningserver

# bitcoin.conf
miningserver=1
```

**ุงุนุชุจุงุฑุงุช ุงูุฃูุงู**:
- ูุง ูุตุงุฏูุฉ ุฅุถุงููุฉ ุจุฎูุงู ุจูุงูุงุช ุงุนุชูุงุฏ RPC ุงูููุงุณูุฉ
- RPCs ุงูุชุนุฏูู ูุญุฏูุฏุฉ ุงููุนุฏู ุจุณุนุฉ ุงูุทุงุจูุฑ
- ูุตุงุฏูุฉ RPC ุงูููุงุณูุฉ ูุง ุชุฒุงู ูุทููุจุฉ

**ุงูุชูููุฐ**: `src/pocx/rpc/mining.cpp`

---

## RPCs ุชุนุฏูู PoCX

### get_mining_info

**ุงููุฆุฉ**: mining
**ูุชุทูุจ ุฎุงุฏู ุงูุชุนุฏูู**: ูุง
**ูุชุทูุจ ูุญูุธุฉ**: ูุง

**ุงูุบุฑุถ**: ููุฑุฌุน ูุนููุงุช ุงูุชุนุฏูู ุงูุญุงููุฉ ุงููุงุฒูุฉ ููููุนุฏูููู ุงูุฎุงุฑุฌููู ููุณุญ ูููุงุช ุงูุฑุณู ูุญุณุงุจ ุงูููุงุนูุฏ ุงูููุงุฆูุฉ.

**ุงููุนููุงุช**: ูุง ุดูุก

**ุงูููู ุงูููุฑุฌุนุฉ**:
```json
{
  "generation_signature": "abc123...",       // hexุ 64 ุญุฑู
  "base_target": 36650387593,                // ุฑููู
  "height": 12345,                           // ุฑูููุ ุงุฑุชูุงุน ุงููุชูุฉ ุงูุชุงููุฉ
  "block_hash": "def456...",                 // hexุ ุงููุชูุฉ ุงูุณุงุจูุฉ
  "target_quality": 18446744073709551615,    // uint64_max (ุฌููุน ุงูุญููู ููุจููุฉ)
  "minimum_compression_level": 1,            // ุฑููู
  "target_compression_level": 2              // ุฑููู
}
```

**ุฃูุตุงู ุงูุญููู**:
- `generation_signature`: ุฅูุชุฑูุจูุง ุงูุชุนุฏูู ุงูุญุชููุฉ ูุงุฑุชูุงุน ุงููุชูุฉ ูุฐุง
- `base_target`: ุงูุตุนูุจุฉ ุงูุญุงููุฉ (ุฃุนูู = ุฃุณูู)
- `height`: ุงุฑุชูุงุน ุงููุชูุฉ ุงูุฐู ูุฌุจ ุฃู ูุณุชูุฏูู ุงูููุนุฏูููู
- `block_hash`: ุชุฌุฒุฆุฉ ุงููุชูุฉ ุงูุณุงุจูุฉ (ูุนูููุงุชู)
- `target_quality`: ุนุชุจุฉ ุงูุฌูุฏุฉ (ุญุงููุงู uint64_maxุ ูุง ุชุตููุฉ)
- `minimum_compression_level`: ุงูุญุฏ ุงูุฃุฏูู ููุถุบุท ุงููุทููุจ ููุชุญูู
- `target_compression_level`: ุงูุถุบุท ุงูููุตู ุจู ููุชุนุฏูู ุงูุฃูุซู

**ุฑููุฒ ุงูุฎุทุฃ**:
- `RPC_CLIENT_IN_INITIAL_DOWNLOAD`: ุงูุนูุฏุฉ ูุง ุชุฒุงู ุชุชุฒุงูู

**ูุซุงู**:
```bash
bitcoin-cli get_mining_info
```

**ุงูุชูููุฐ**: `src/pocx/rpc/mining.cpp:get_mining_info()`

---

### submit_nonce

**ุงููุฆุฉ**: mining
**ูุชุทูุจ ุฎุงุฏู ุงูุชุนุฏูู**: ูุนู
**ูุชุทูุจ ูุญูุธุฉ**: ูุนู (ููููุงุชูุญ ุงูุฎุงุตุฉ)

**ุงูุบุฑุถ**: ุฅุฑุณุงู ุญู ุชุนุฏูู PoCX. ูุชุญูู ูู ุงูุฅุซุจุงุชุ ูุถุนู ูู ุทุงุจูุฑ ููุตูุงุบุฉ ุงููุซููุฉ ููููุชุ ููููุดุฆ ุงููุชูุฉ ุชููุงุฆูุงู ูู ุงูููุช ุงููุฌุฏูู.

**ุงููุนููุงุช**:
1. `height` (ุฑูููุ ูุทููุจ) - ุงุฑุชูุงุน ุงููุชูุฉ
2. `generation_signature` (ุณูุณูุฉ hexุ ูุทููุจ) - ุชูููุน ุงูุชูููุฏ (64 ุญุฑู)
3. `account_id` (ุณูุณูุฉุ ูุทููุจ) - ูุนุฑู ุญุณุงุจ ุงูุฑุณู (40 ุญุฑู hex = 20 ุจุงูุช)
4. `seed` (ุณูุณูุฉุ ูุทููุจ) - ุจุฐุฑุฉ ุงูุฑุณู (64 ุญุฑู hex = 32 ุจุงูุช)
5. `nonce` (ุฑูููุ ูุทููุจ) - nonce ุงูุชุนุฏูู
6. `compression` (ุฑูููุ ูุทููุจ) - ูุณุชูู ุงููููุงุณ/ุงูุถุบุท ุงููุณุชุฎุฏู (1-255)
7. `quality` (ุฑูููุ ุงุฎุชูุงุฑู) - ูููุฉ ุงูุฌูุฏุฉ (ุชูุนุงุฏ ุญุณุงุจูุง ุฅุฐุง ุญูุฐูุช)

**ุงูููู ุงูููุฑุฌุนุฉ** (ุงููุฌุงุญ):
```json
{
  "accepted": true,
  "quality": 120,           // ุงูููุนุฏ ุงูููุงุฆู ุงูููุนุฏูู ููุตุนูุจุฉ ุจุงูุซูุงูู
  "poc_time": 45            // ููุช ุงูุตูุงุบุฉ ุงููุซูู ุจุงูุซูุงูู
}
```

**ุงูููู ุงูููุฑุฌุนุฉ** (ุงูุฑูุถ):
```json
{
  "accepted": false,
  "error": "ุนุฏู ุชุทุงุจู ุชูููุน ุงูุชูููุฏ"
}
```

**ุฎุทูุงุช ุงูุชุญูู**:
1. **ุงูุชุญูู ูู ุงูุตูุบุฉ** (ูุดู ุณุฑูุน):
   - Account ID: ุจุงูุถุจุท 40 ุญุฑู hex
   - Seed: ุจุงูุถุจุท 64 ุญุฑู hex
2. **ุงูุชุญูู ูู ุงูุณูุงู**:
   - ุงูุงุฑุชูุงุน ูุฌุจ ุฃู ูุทุงุจู ุงูุฑุฃุณ ุงูุญุงูู + 1
   - ุชูููุน ุงูุชูููุฏ ูุฌุจ ุฃู ูุทุงุจู ุงูุญุงูู
3. **ุงูุชุญูู ูู ุงููุญูุธุฉ**:
   - ุชุญุฏูุฏ ุงููููููุน ุงููุนุงู (ุงูุชุญูู ูู ุงูุชุนูููุงุช ุงููุดุทุฉ)
   - ุงูุชุญูู ูู ุฃู ุงููุญูุธุฉ ุชููู ุงูููุชุงุญ ุงูุฎุงุต ูููููููุน ุงููุนุงู
4. **ุงูุชุญูู ูู ุงูุฅุซุจุงุช** (ูููู):
   - ุงูุชุญูู ูู ุฅุซุจุงุช PoCX ูุน ุญุฏูุฏ ุงูุถุบุท
   - ุญุณุงุจ ุงูุฌูุฏุฉ ุงูุฎุงู
5. **ุฅุฑุณุงู ูููุฌุฏูู**:
   - ูุถุน nonce ูู ุงูุทุงุจูุฑ ููุตูุงุบุฉ ุงููุซููุฉ ููููุช
   - ุงููุชูุฉ ุณุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ forge_time

**ุฑููุฒ ุงูุฎุทุฃ**:
- `RPC_INVALID_PARAMETER`: ุตูุบุฉ ุบูุฑ ุตุงูุญุฉ (account_idุ seed) ุฃู ุนุฏู ุชุทุงุจู ุงูุงุฑุชูุงุน
- `RPC_VERIFY_REJECTED`: ุนุฏู ุชุทุงุจู ุชูููุน ุงูุชูููุฏ ุฃู ูุดู ุงูุชุญูู ูู ุงูุฅุซุจุงุช
- `RPC_INVALID_ADDRESS_OR_KEY`: ูุง ููุชุงุญ ุฎุงุต ูููููููุน ุงููุนุงู
- `RPC_CLIENT_IN_INITIAL_DOWNLOAD`: ุทุงุจูุฑ ุงูุฅุฑุณุงู ููุชูุฆ
- `RPC_INTERNAL_ERROR`: ูุดู ุชููุฆุฉ ูุฌุฏูู PoCX

**ุฑููุฒ ุฎุทุฃ ุงูุชุญูู ูู ุงูุฅุซุจุงุช**:
- `0`: VALIDATION_SUCCESS
- `-1`: VALIDATION_ERROR_NULL_POINTER
- `-2`: VALIDATION_ERROR_INVALID_INPUT
- `-100`: VALIDATION_ERROR_GENERATION_SIGNATURE_PARSE
- `-101`: VALIDATION_ERROR_GENERATION_SIGNATURE_DECODE
- `-106`: VALIDATION_ERROR_QUALITY_CALCULATION

**ูุซุงู**:
```bash
bitcoin-cli submit_nonce 12345 \
  "abc123..." \
  "1234567890abcdef1234567890abcdef12345678" \
  "plot_seed_64_hex_characters..." \
  999888777 \
  1
```

**ููุงุญุธุงุช**:
- ุงูุฅุฑุณุงู ุบูุฑ ูุชุฒุงูู - RPC ูุนูุฏ ููุฑุงูุ ุงููุชูุฉ ุชูุตุงุบ ูุงุญูุงู
- ุซูู ุงูููุช ูุคุฎุฑ ุงูุญููู ุงูุฌูุฏุฉ ููุณูุงุญ ุจูุณุญ ุงูุฑุณู ุนูู ูุณุชูู ุงูุดุจูุฉ
- ูุธุงู ุงูุชุนููู: ุฅุฐุง ูุงู ุงูุฑุณู ููุนูููุงูุ ูุฌุจ ุฃู ุชููู ุงููุญูุธุฉ ููุชุงุญ ุนููุงู ุงูุตูุงุบุฉ
- ุญุฏูุฏ ุงูุถุบุท ุชูุนุฏูู ุฏููุงููููุงู ุจูุงุกู ุนูู ุงุฑุชูุงุน ุงููุชูุฉ

**ุงูุชูููุฐ**: `src/pocx/rpc/mining.cpp:submit_nonce()`

---

## RPCs ุงูุชุนููู

### get_assignment

**ุงููุฆุฉ**: mining
**ูุชุทูุจ ุฎุงุฏู ุงูุชุนุฏูู**: ูุง
**ูุชุทูุจ ูุญูุธุฉ**: ูุง

**ุงูุบุฑุถ**: ุงุณุชุนูุงู ุญุงูุฉ ุชุนููู ุงูุตูุงุบุฉ ูุนููุงู ุฑุณู. ูููุฑุงุกุฉ ููุทุ ูุง ุชุชุทูุจ ูุญูุธุฉ.

**ุงููุนููุงุช**:
1. `plot_address` (ุณูุณูุฉุ ูุทููุจ) - ุนููุงู ุงูุฑุณู (ุตูุบุฉ P2WPKH bech32)
2. `height` (ุฑูููุ ุงุฎุชูุงุฑู) - ุงุฑุชูุงุน ุงููุชูุฉ ููุงุณุชุนูุงู (ุงูุชุฑุงุถู: ุงูุฑุฃุณ ุงูุญุงูู)

**ุงูููู ุงูููุฑุฌุนุฉ** (ูุง ุชุนููู):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": false,
  "state": "UNASSIGNED"
}
```

**ุงูููู ุงูููุฑุฌุนุฉ** (ุชุนููู ูุดุท):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": true,
  "state": "ASSIGNED",
  "forging_address": "pocx1qforger...",
  "assignment_txid": "abc123...",
  "assignment_height": 12000,
  "activation_height": 12030
}
```

**ุงูููู ุงูููุฑุฌุนุฉ** (ููุฏ ุงูุฅูุบุงุก):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": true,
  "state": "REVOKING",
  "forging_address": "pocx1qforger...",
  "assignment_txid": "abc123...",
  "assignment_height": 12000,
  "activation_height": 12030,
  "revoked": true,
  "revocation_txid": "def456...",
  "revocation_height": 12300,
  "revocation_effective_height": 13020
}
```

**ุญุงูุงุช ุงูุชุนููู**:
- `UNASSIGNED`: ูุง ุชุนููู ููุฌูุฏ
- `ASSIGNING`: ูุนุงููุฉ ุงูุชุนููู ูุคูุฏุฉุ ุชุฃุฎูุฑ ุงูุชูุนูู ููุฏ ุงูุชูุฏู
- `ASSIGNED`: ุงูุชุนููู ูุดุทุ ุญููู ุงูุตูุงุบุฉ ูููููุถุฉ
- `REVOKING`: ูุนุงููุฉ ุงูุฅูุบุงุก ูุคูุฏุฉุ ูุง ูุฒุงู ูุดุทุงู ุญุชู ุงููุถุงุก ุงูุชุฃุฎูุฑ
- `REVOKED`: ุงูุฅูุบุงุก ููุชููุ ุญููู ุงูุตูุงุบุฉ ุนุงุฏุช ููุงูู ุงูุฑุณู

**ุฑููุฒ ุงูุฎุทุฃ**:
- `RPC_INVALID_ADDRESS_OR_KEY`: ุนููุงู ุบูุฑ ุตุงูุญ ุฃู ููุณ P2WPKH (bech32)

**ูุซุงู**:
```bash
bitcoin-cli get_assignment "pocx1qplot..."
bitcoin-cli get_assignment "pocx1qplot..." 800000
```

**ุงูุชูููุฐ**: `src/pocx/rpc/assignments.cpp:get_assignment()`

---

### create_assignment

**ุงููุฆุฉ**: wallet
**ูุชุทูุจ ุฎุงุฏู ุงูุชุนุฏูู**: ูุง
**ูุชุทูุจ ูุญูุธุฉ**: ูุนู (ูุฌุจ ุฃู ุชููู ููุญูููุฉ ูููุชูุญุฉ)

**ุงูุบุฑุถ**: ุฅูุดุงุก ูุนุงููุฉ ุชุนููู ุตูุงุบุฉ ูุชูููุถ ุญููู ุงูุตูุงุบุฉ ูุนููุงู ุขุฎุฑ (ูุซูุงูุ ูุฌูุน ุชุนุฏูู).

**ุงููุนููุงุช**:
1. `plot_address` (ุณูุณูุฉุ ูุทููุจ) - ุนููุงู ูุงูู ุงูุฑุณู (ูุฌุจ ููู ุงูููุชุงุญ ุงูุฎุงุตุ P2WPKH bech32)
2. `forging_address` (ุณูุณูุฉุ ูุทููุจ) - ุงูุนููุงู ูุชุนููู ุญููู ุงูุตูุงุบุฉ ูู (P2WPKH bech32)
3. `fee_rate` (ุฑูููุ ุงุฎุชูุงุฑู) - ูุนุฏู ุงูุฑุณูู ุจู BTC/kvB (ุงูุชุฑุงุถู: 10ร minRelayFee)

**ุงูููู ุงูููุฑุฌุนุฉ**:
```json
{
  "txid": "abc123...",
  "hex": "020000...",
  "plot_address": "pocx1qplot...",
  "forging_address": "pocx1qforger..."
}
```

**ุงููุชุทูุจุงุช**:
- ุงููุญูุธุฉ ููุญูููุฉ ูููุชูุญุฉ
- ุงูููุชุงุญ ุงูุฎุงุต ูู plot_address ูู ุงููุญูุธุฉ
- ููุง ุงูุนููุงููู ูุฌุจ ุฃู ููููุง P2WPKH (ุตูุบุฉ bech32: pocx1q... mainnetุ tpocx1q... testnet)
- ุนููุงู ุงูุฑุณู ูุฌุจ ุฃู ูููู UTXOs ูุคูุฏุฉ (ูุซุจุช ุงูููููุฉ)
- ุงูุฑุณู ูุฌุจ ุฃูุง ูููู ุชุนููู ูุดุท (ุงุณุชุฎุฏู ุฅูุบุงุก ุฃููุงู)

**ูููู ุงููุนุงููุฉ**:
- ุงููุฏุฎู: UTXO ูู ุนููุงู ุงูุฑุณู (ูุซุจุช ุงูููููุฉ)
- ุงููุฎุฑุฌ: OP_RETURN (46 ุจุงูุช): ุนูุงูุฉ `POCX` + plot_address (20 ุจุงูุช) + forging_address (20 ุจุงูุช)
- ุงููุฎุฑุฌ: ุงูุชุบููุฑ ููุนุงุฏ ูููุญูุธุฉ

**ุงูุชูุนูู**:
- ุงูุชุนููู ูุตุจุญ ASSIGNING ุนูุฏ ุงูุชุฃููุฏ
- ูุตุจุญ ACTIVE ุจุนุฏ `nForgingAssignmentDelay` ูุชูุฉ
- ุงูุชุฃุฎูุฑ ูููุน ุฅุนุงุฏุฉ ุงูุชุนููู ุงูุณุฑูุนุฉ ุฃุซูุงุก ุชูุฑุนุงุช ุงูุณูุณูุฉ

**ุฑููุฒ ุงูุฎุทุฃ**:
- `RPC_WALLET_NOT_FOUND`: ูุง ูุญูุธุฉ ูุชุงุญุฉ
- `RPC_WALLET_UNLOCK_NEEDED`: ุงููุญูุธุฉ ูุดูุฑุฉ ูููููุฉ
- `RPC_WALLET_ERROR`: ูุดู ุฅูุดุงุก ุงููุนุงููุฉ
- `RPC_INVALID_ADDRESS_OR_KEY`: ุตูุบุฉ ุนููุงู ุบูุฑ ุตุงูุญุฉ

**ูุซุงู**:
```bash
bitcoin-cli create_assignment "pocx1qplot..." "pocx1qforger..."
bitcoin-cli create_assignment "pocx1qplot..." "pocx1qforger..." 0.0001
```

**ุงูุชูููุฐ**: `src/pocx/rpc/assignments_wallet.cpp:create_assignment()`

---

### revoke_assignment

**ุงููุฆุฉ**: wallet
**ูุชุทูุจ ุฎุงุฏู ุงูุชุนุฏูู**: ูุง
**ูุชุทูุจ ูุญูุธุฉ**: ูุนู (ูุฌุจ ุฃู ุชููู ููุญูููุฉ ูููุชูุญุฉ)

**ุงูุบุฑุถ**: ุฅูุบุงุก ุชุนููู ุตูุงุบุฉ ููุฌูุฏุ ุฅุนุงุฏุฉ ุญููู ุงูุตูุงุบุฉ ููุงูู ุงูุฑุณู.

**ุงููุนููุงุช**:
1. `plot_address` (ุณูุณูุฉุ ูุทููุจ) - ุนููุงู ุงูุฑุณู (ูุฌุจ ููู ุงูููุชุงุญ ุงูุฎุงุตุ P2WPKH bech32)
2. `fee_rate` (ุฑูููุ ุงุฎุชูุงุฑู) - ูุนุฏู ุงูุฑุณูู ุจู BTC/kvB (ุงูุชุฑุงุถู: 10ร minRelayFee)

**ุงูููู ุงูููุฑุฌุนุฉ**:
```json
{
  "txid": "def456...",
  "hex": "020000...",
  "plot_address": "pocx1qplot..."
}
```

**ุงููุชุทูุจุงุช**:
- ุงููุญูุธุฉ ููุญูููุฉ ูููุชูุญุฉ
- ุงูููุชุงุญ ุงูุฎุงุต ูู plot_address ูู ุงููุญูุธุฉ
- ุนููุงู ุงูุฑุณู ูุฌุจ ุฃู ูููู P2WPKH (ุตูุบุฉ bech32)
- ุนููุงู ุงูุฑุณู ูุฌุจ ุฃู ูููู UTXOs ูุคูุฏุฉ

**ูููู ุงููุนุงููุฉ**:
- ุงููุฏุฎู: UTXO ูู ุนููุงู ุงูุฑุณู (ูุซุจุช ุงูููููุฉ)
- ุงููุฎุฑุฌ: OP_RETURN (26 ุจุงูุช): ุนูุงูุฉ `XCOP` + plot_address (20 ุจุงูุช)
- ุงููุฎุฑุฌ: ุงูุชุบููุฑ ููุนุงุฏ ูููุญูุธุฉ

**ุงูุชุฃุซูุฑ**:
- ุงูุญุงูุฉ ุชูุชูู ุฅูู REVOKING ููุฑุงู
- ุนููุงู ุงูุตูุงุบุฉ ูุง ูุฒุงู ููููู ุงูุตูุงุบุฉ ุฎูุงู ูุชุฑุฉ ุงูุชุฃุฎูุฑ
- ูุตุจุญ REVOKED ุจุนุฏ `nForgingRevocationDelay` ูุชูุฉ
- ูุงูู ุงูุฑุณู ููููู ุงูุตูุงุบุฉ ุจุนุฏ ุฃู ูุตุจุญ ุงูุฅูุบุงุก ูุนุงูุงู
- ูููู ุฅูุดุงุก ุชุนููู ุฌุฏูุฏ ุจุนุฏ ุงูุชูุงู ุงูุฅูุบุงุก

**ุฑููุฒ ุงูุฎุทุฃ**:
- `RPC_WALLET_NOT_FOUND`: ูุง ูุญูุธุฉ ูุชุงุญุฉ
- `RPC_WALLET_UNLOCK_NEEDED`: ุงููุญูุธุฉ ูุดูุฑุฉ ูููููุฉ
- `RPC_WALLET_ERROR`: ูุดู ุฅูุดุงุก ุงููุนุงููุฉ

**ูุซุงู**:
```bash
bitcoin-cli revoke_assignment "pocx1qplot..."
bitcoin-cli revoke_assignment "pocx1qplot..." 0.0001
```

**ููุงุญุธุงุช**:
- ุชูุงุซู ุงูุนูููุฉ: ูููู ุงูุฅูุบุงุก ุญุชู ูู ูู ููุฌุฏ ุชุนููู ูุดุท
- ูุง ูููู ุฅูุบุงุก ุงูุฅูุบุงุก ุจูุฌุฑุฏ ุฅุฑุณุงูู

**ุงูุชูููุฐ**: `src/pocx/rpc/assignments_wallet.cpp:revoke_assignment()`

---

## RPCs ุณูุณูุฉ ุงููุชู ุงูููุนุฏููุฉ

### getdifficulty

**ุชุนุฏููุงุช PoCX**:
- **ุงูุญุณุงุจ**: `reference_base_target / current_base_target`
- **ุงููุฑุฌุน**: ุณุนุฉ ุดุจูุฉ 1 TiB (base_target = 36650387593)
- **ุงูุชูุณูุฑ**: ุณุนุฉ ุงูุชุฎุฒูู ุงููููุฏูุฑุฉ ููุดุจูุฉ ุจู TiB
  - ูุซุงู: `1.0` = ~1 TiB
  - ูุซุงู: `1024.0` = ~1 PiB
- **ุงููุฑู ุนู PoW**: ููุซู ุงูุณุนุฉุ ููุณ ููุฉ ุงูุชุฌุฒุฆุฉ

**ูุซุงู**:
```bash
bitcoin-cli getdifficulty
# ููุฑุฌุน: 2048.5 (ุงูุดุจูุฉ ~2 PiB)
```

**ุงูุชูููุฐ**: `src/rpc/blockchain.cpp`

---

### getblockheader

**ุงูุญููู ุงูููุถุงูุฉ ูู PoCX**:
- `time_since_last_block` (ุฑููู) - ุงูุซูุงูู ููุฐ ุงููุชูุฉ ุงูุณุงุจูุฉ (ูุญู ูุญู mediantime)
- `poc_time` (ุฑููู) - ููุช ุงูุตูุงุบุฉ ุงููุซูู ุจุงูุซูุงูู
- `base_target` (ุฑููู) - ุงููุฏู ุงูุฃุณุงุณู ูุตุนูุจุฉ PoCX
- `generation_signature` (ุณูุณูุฉ hex) - ุชูููุน ุงูุชูููุฏ
- `pocx_proof` (ูุงุฆู):
  - `account_id` (ุณูุณูุฉ hex) - ูุนุฑู ุญุณุงุจ ุงูุฑุณู (20 ุจุงูุช)
  - `seed` (ุณูุณูุฉ hex) - ุจุฐุฑุฉ ุงูุฑุณู (32 ุจุงูุช)
  - `nonce` (ุฑููู) - nonce ุงูุชุนุฏูู
  - `compression` (ุฑููู) - ูุณุชูู ุงููููุงุณ ุงููุณุชุฎุฏู
  - `quality` (ุฑููู) - ูููุฉ ุงูุฌูุฏุฉ ุงูููุฏูุนุงุฉ
- `pubkey` (ุณูุณูุฉ hex) - ุงูููุชุงุญ ุงูุนุงู ูููููุน ุงููุชูุฉ (33 ุจุงูุช)
- `signer_address` (ุณูุณูุฉ) - ุนููุงู ููููุน ุงููุชูุฉ
- `signature` (ุณูุณูุฉ hex) - ุชูููุน ุงููุชูุฉ (65 ุจุงูุช)

**ุงูุญููู ุงูููุฒุงูุฉ ูู PoCX**:
- `mediantime` - ููุฒุงู (ูุญู ูุญูู time_since_last_block)

**ูุซุงู**:
```bash
bitcoin-cli getblockheader <blockhash>
```

**ุงูุชูููุฐ**: `src/rpc/blockchain.cpp`

---

### getblock

**ุชุนุฏููุงุช PoCX**: ููุณ getblockheaderุ ุจุงูุฅุถุงูุฉ ูุจูุงูุงุช ุงููุนุงููุงุช ุงููุงููุฉ

**ูุซุงู**:
```bash
bitcoin-cli getblock <blockhash>
bitcoin-cli getblock <blockhash> 2  # ุชูุตููู ูุน ุชูุงุตูู ุงููุนุงููุงุช
```

**ุงูุชูููุฐ**: `src/rpc/blockchain.cpp`

---

### getblockchaininfo

**ุงูุญููู ุงูููุถุงูุฉ ูู PoCX**:
- `base_target` (ุฑููู) - ุงููุฏู ุงูุฃุณุงุณู ุงูุญุงูู
- `generation_signature` (ุณูุณูุฉ hex) - ุชูููุน ุงูุชูููุฏ ุงูุญุงูู

**ุงูุญููู ุงูููุนุฏููุฉ ูู PoCX**:
- `difficulty` - ูุณุชุฎุฏู ุญุณุงุจ PoCX (ูุงุฆู ุนูู ุงูุณุนุฉ)

**ุงูุญููู ุงูููุฒุงูุฉ ูู PoCX**:
- `mediantime` - ููุฒุงู

**ูุซุงู**:
```bash
bitcoin-cli getblockchaininfo
```

**ุงูุชูููุฐ**: `src/rpc/blockchain.cpp`

---

### getblocktemplate

**ุงูุญููู ุงูููุถุงูุฉ ูู PoCX**:
- `generation_signature` (ุณูุณูุฉ hex) - ูุชุนุฏูู ุงููุฌูุนุงุช
- `base_target` (ุฑููู) - ูุชุนุฏูู ุงููุฌูุนุงุช

**ุงูุญููู ุงูููุฒุงูุฉ ูู PoCX**:
- `target` - ููุฒุงู (ุฎุงุต ุจู PoW)
- `noncerange` - ููุฒุงู (ุฎุงุต ุจู PoW)
- `bits` - ููุฒุงู (ุฎุงุต ุจู PoW)

**ููุงุญุธุงุช**:
- ูุง ูุฒุงู ูุชุถูู ุจูุงูุงุช ุงููุนุงููุงุช ุงููุงููุฉ ูุจูุงุก ุงููุชูุฉ
- ููุณุชุฎุฏู ูู ุฎูุงุฏู ุงููุฌูุนุงุช ููุชุนุฏูู ุงูููุณู

**ูุซุงู**:
```bash
bitcoin-cli getblocktemplate '{"rules": ["segwit"]}'
```

**ุงูุชูููุฐ**: `src/rpc/mining.cpp`

---

## RPCs ุงูููุนุทููุฉ

RPCs ุงูุชุงููุฉ ุงูุฎุงุตุฉ ุจู PoW **ููุนุทููุฉ** ูู ูุถุน PoCX:

### getnetworkhashps
- **ุงูุณุจุจ**: ูุนุฏู ุงูุชุฌุฒุฆุฉ ุบูุฑ ูุงุจู ููุชุทุจูู ุนูู ุฅุซุจุงุช ุงูุณุนุฉ
- **ุงูุจุฏูู**: ุงุณุชุฎุฏู `getdifficulty` ูุชูุฏูุฑ ุณุนุฉ ุงูุดุจูุฉ

### getmininginfo
- **ุงูุณุจุจ**: ููุฑุฌุน ูุนูููุงุช ุฎุงุตุฉ ุจู PoW
- **ุงูุจุฏูู**: ุงุณุชุฎุฏู `get_mining_info` (ุฎุงุต ุจู PoCX)

### generateุ generatetoaddressุ generatetodescriptorุ generateblock
- **ุงูุณุจุจ**: ุชุนุฏูู CPU ุบูุฑ ูุงุจู ููุชุทุจูู ุนูู PoCX (ูุชุทูุจ ุฑุณููุงุช ูููููุฏุฉ ูุณุจูุงู)
- **ุงูุจุฏูู**: ุงุณุชุฎุฏู ุฑุงุณู ุฎุงุฑุฌู + ููุนุฏูู + `submit_nonce`

**ุงูุชูููุฐ**: `src/rpc/mining.cpp` (RPCs ุชูุฑุฌุน ุฎุทุฃ ุนูุฏ ุชุนุฑูู ENABLE_POCX)

---

## ุฃูุซูุฉ ุงูุชูุงูู

### ุชูุงูู ุงูููุนุฏูู ุงูุฎุงุฑุฌู

**ุญููุฉ ุงูุชุนุฏูู ุงูุฃุณุงุณูุฉ**:
```python
import requests
import time

RPC_URL = "http://user:pass@localhost:8332"

def rpc_call(method, params=[]):
    payload = {
        "jsonrpc": "2.0",
        "id": "miner",
        "method": method,
        "params": params
    }
    response = requests.post(RPC_URL, json=payload)
    return response.json()["result"]

# ุญููุฉ ุงูุชุนุฏูู
while True:
    # 1. ุงูุญุตูู ุนูู ูุนููุงุช ุงูุชุนุฏูู
    info = rpc_call("get_mining_info")

    gen_sig = info["generation_signature"]
    base_target = info["base_target"]
    height = info["height"]
    min_compression = info["minimum_compression_level"]
    target_compression = info["target_compression_level"]

    # 2. ูุณุญ ูููุงุช ุงูุฑุณู (ุชูููุฐ ุฎุงุฑุฌู)
    best_nonce = scan_plots(gen_sig, height)

    # 3. ุฅุฑุณุงู ุฃูุถู ุญู
    result = rpc_call("submit_nonce", [
        height,
        gen_sig,
        best_nonce["account_id"],
        best_nonce["seed"],
        best_nonce["nonce"]
    ])

    if result["accepted"]:
        print(f"ุงูุญู ููุจูู! ุงูุฌูุฏุฉ: {result['quality']}ุซุ "
              f"ููุช ุงูุตูุงุบุฉ: {result['poc_time']}ุซ")

    # 4. ุงูุชุธุงุฑ ุงููุชูุฉ ุงูุชุงููุฉ
    time.sleep(10)  # ูุชุฑุฉ ุงูุงุณุชุทูุงุน
```

---

### ููุท ุชูุงูู ุงููุฌูุน

**ุณูุฑ ุนูู ุฎุงุฏู ุงููุฌูุน**:
1. ุงูููุนุฏูููู ูููุดุฆูู ุชุนูููุงุช ุตูุงุบุฉ ูุนููุงู ุงููุฌูุน
2. ุงููุฌูุน ููุดุบูู ูุญูุธุฉ ุจููุงุชูุญ ุนููุงู ุงูุตูุงุบุฉ
3. ุงููุฌูุน ูุณุชุฏุนู `get_mining_info` ูููุฒุน ููููุนุฏูููู
4. ุงูููุนุฏูููู ููุฑุณููู ุงูุญููู ุนุจุฑ ุงููุฌูุน (ููุณ ูุจุงุดุฑุฉ ููุณูุณูุฉ)
5. ุงููุฌูุน ูุชุญูู ููุณุชุฏุนู `submit_nonce` ุจููุงุชูุญ ุงููุฌูุน
6. ุงููุฌูุน ููุฒุน ุงูููุงูุขุช ููู ุณูุงุณุฉ ุงููุฌูุน

**ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช**:
```bash
# ุงูููุนุฏูู ูููุดุฆ ุชุนููู (ูู ูุญูุธุฉ ุงูููุนุฏูู)
bitcoin-cli create_assignment "pocx1qminer_plot..." "pocx1qpool..."

# ุงูุชุธุงุฑ ุงูุชูุนูู (30 ูุชูุฉ mainnet)

# ุงููุฌูุน ููุญุต ุญุงูุฉ ุงูุชุนููู
bitcoin-cli get_assignment "pocx1qminer_plot..."

# ุงููุฌูุน ููููู ุงูุขู ุฅุฑุณุงู nonces ููุฐุง ุงูุฑุณู
# (ูุญูุธุฉ ุงููุฌูุน ูุฌุจ ุฃู ุชููู ุงูููุชุงุญ ุงูุฎุงุต ูู pocx1qpool...)
```

---

### ุงุณุชุนูุงูุงุช ูุณุชูุดู ุงููุชู

**ุงุณุชุนูุงู ุจูุงูุงุช ูุชูุฉ PoCX**:
```bash
# ุงูุญุตูู ุนูู ุขุฎุฑ ูุชูุฉ
BLOCK_HASH=$(bitcoin-cli getbestblockhash)

# ุงูุญุตูู ุนูู ุชูุงุตูู ุงููุชูุฉ ูุน ุฅุซุจุงุช PoCX
BLOCK=$(bitcoin-cli getblock $BLOCK_HASH 2)

# ุงุณุชุฎุฑุงุฌ ุงูุญููู ุงูุฎุงุตุฉ ุจู PoCX
echo $BLOCK | jq '{
  height: .height,
  time_since_last: .time_since_last_block,
  poc_time: .poc_time,
  base_target: .base_target,
  generation_signature: .generation_signature,
  pocx_proof: .pocx_proof,
  miner_address: .tx[0].vout[0].scriptPubKey.address
}'
```

**ูุดู ูุนุงููุงุช ุงูุชุนููู**:
```bash
# ูุณุญ ุงููุนุงููุฉ ูู OP_RETURN
TX=$(bitcoin-cli getrawtransaction <txid> 1)

# ุงูุชุญูู ูู ุนูุงูุฉ ุงูุชุนููู (POCX = 0x504f4358)
echo $TX | jq '.vout[] | select(.scriptPubKey.asm | startswith("OP_RETURN 504f4358"))'
```

---

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃููุงุท ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

**ุนุฏู ุชุทุงุจู ุงูุงุฑุชูุงุน**:
```json
{
  "accepted": false,
  "error": "ุนุฏู ุชุทุงุจู ุงูุงุฑุชูุงุน: ุงูููุฑุณู 12345ุ ุงูุญุงูู 12346"
}
```
**ุงูุญู**: ุฃุนุฏ ุฌูุจ ูุนูููุงุช ุงูุชุนุฏููุ ุงูุณูุณูุฉ ุชูุฏูุช

**ุนุฏู ุชุทุงุจู ุชูููุน ุงูุชูููุฏ**:
```json
{
  "accepted": false,
  "error": "ุนุฏู ุชุทุงุจู ุชูููุน ุงูุชูููุฏ"
}
```
**ุงูุญู**: ุฃุนุฏ ุฌูุจ ูุนูููุงุช ุงูุชุนุฏููุ ูุชูุฉ ุฌุฏูุฏุฉ ูุตูุช

**ูุง ููุชุงุญ ุฎุงุต**:
```json
{
  "code": -5,
  "message": "ูุง ููุชุงุญ ุฎุงุต ูุชุงุญ ูููููููุน ุงููุนุงู"
}
```
**ุงูุญู**: ุงุณุชูุฑุฏ ุงูููุชุงุญ ูุนููุงู ุงูุฑุณู ุฃู ุนููุงู ุงูุตูุงุบุฉ

**ุชูุนูู ุงูุชุนููู ูุนูู**:
```json
{
  "plot_address": "pocx1qplot...",
  "state": "ASSIGNING",
  "activation_height": 12030
}
```
**ุงูุญู**: ุงูุชุธุฑ ุงููุถุงุก ุชุฃุฎูุฑ ุงูุชูุนูู

---

## ูุฑุงุฌุน ุงูููุฏ

**RPCs ุงูุชุนุฏูู**: `src/pocx/rpc/mining.cpp`
**RPCs ุงูุชุนููู**: `src/pocx/rpc/assignments.cpp`ุ `src/pocx/rpc/assignments_wallet.cpp`
**RPCs ุณูุณูุฉ ุงููุชู**: `src/rpc/blockchain.cpp`
**ุงูุชุญูู ูู ุงูุฅุซุจุงุช**: `src/pocx/consensus/validation.cpp`ุ `src/pocx/consensus/pocx.cpp`
**ุญุงูุฉ ุงูุชุนููู**: `src/pocx/assignments/assignment_state.cpp`
**ุฅูุดุงุก ุงููุนุงููุฉ**: `src/pocx/assignments/transactions.cpp`

---

## ุงููุฑุงุฌุน ุงูุชุจุงุฏููุฉ

ุงููุตูู ุฐุงุช ุงูุตูุฉ:
- [ุงููุตู ุงูุซุงูุซ: ุงูุฅุฌูุงุน ูุงูุชุนุฏูู](3-consensus-and-mining.md) - ุชูุงุตูู ุนูููุฉ ุงูุชุนุฏูู
- [ุงููุตู ุงูุฑุงุจุน: ุชุนูููุงุช ุงูุตูุงุบุฉ](4-forging-assignments.md) - ุจููุฉ ูุธุงู ุงูุชุนููู
- [ุงููุตู ุงูุณุงุฏุณ: ูุนููุงุช ุงูุดุจูุฉ](6-network-parameters.md) - ููู ุชุฃุฎูุฑ ุงูุชุนููู
- [ุงููุตู ุงูุซุงูู: ุฏููู ุงููุญูุธุฉ](8-wallet-guide.md) - ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฅุฏุงุฑุฉ ุงูุชุนูููุงุช

---

[โ ุงูุณุงุจู: ูุนููุงุช ุงูุดุจูุฉ](6-network-parameters.md) | [๐ ุฌุฏูู ุงููุญุชููุงุช](index.md) | [ุงูุชุงูู: ุฏููู ุงููุญูุธุฉ โ](8-wallet-guide.md)
