[тЖР рдкрд┐рдЫрд▓рд╛: рдиреЗрдЯрд╡рд░реНрдХ рдкреИрд░рд╛рдореАрдЯрд░](6-network-parameters.md) | [ЁЯУШ рд╡рд┐рд╖рдп-рд╕реВрдЪреА](index.md) | [рдЕрдЧрд▓рд╛: рд╡реЙрд▓реЗрдЯ рдЧрд╛рдЗрдб тЖТ](8-wallet-guide.md)

---

# рдЕрдзреНрдпрд╛рдп 7: RPC рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕рдВрджрд░реНрдн

рдорд╛рдЗрдирд┐рдВрдЧ RPCs, рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдкреНрд░рдмрдВрдзрди, рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдмреНрд▓реЙрдХрдЪреЗрди RPCs рд╕рд╣рд┐рдд Bitcoin-PoCX RPC рдХрдорд╛рдВрдб рдХрд╛ рд╕рдВрдкреВрд░реНрдг рд╕рдВрджрд░реНрднред

---

## рд╡рд┐рд╖рдп-рд╕реВрдЪреА

1. [рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди](#рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди)
2. [PoCX рдорд╛рдЗрдирд┐рдВрдЧ RPCs](#pocx-рдорд╛рдЗрдирд┐рдВрдЧ-rpcs)
3. [рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ RPCs](#рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ-rpcs)
4. [рд╕рдВрд╢реЛрдзрд┐рдд рдмреНрд▓реЙрдХрдЪреЗрди RPCs](#рд╕рдВрд╢реЛрдзрд┐рдд-рдмреНрд▓реЙрдХрдЪреЗрди-rpcs)
5. [рдЕрдХреНрд╖рдо RPCs](#рдЕрдХреНрд╖рдо-rpcs)
6. [рдПрдХреАрдХрд░рдг рдЙрджрд╛рд╣рд░рдг](#рдПрдХреАрдХрд░рдг-рдЙрджрд╛рд╣рд░рдг)

---

## рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

### рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдореЛрдб

**рдлрд╝реНрд▓реИрдЧ**: `-miningserver`

**рдЙрджреНрджреЗрд╢реНрдп**: рдмрд╛рд╣рд░реА рдорд╛рдЗрдирд░реНрд╕ рдХреЗ рд▓рд┐рдП рдорд╛рдЗрдирд┐рдВрдЧ-рд╡рд┐рд╢рд┐рд╖реНрдЯ RPCs рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП RPC рдПрдХреНрд╕реЗрд╕ рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИ

**рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ**:
- `submit_nonce` рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ
- Qt рд╡реЙрд▓реЗрдЯ рдореЗрдВ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдбрд╛рдпрд▓реЙрдЧ рдХреА рджреГрд╢реНрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ

**рдЙрдкрдпреЛрдЧ**:
```bash
# рдХрдорд╛рдВрдб рд▓рд╛рдЗрди
./bitcoind -miningserver

# bitcoin.conf
miningserver=1
```

**рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рдЪрд╛рд░**:
- рдорд╛рдирдХ RPC рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╕реЗ рдкрд░реЗ рдХреЛрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдирд╣реАрдВ
- рдорд╛рдЗрдирд┐рдВрдЧ RPCs рдХрддрд╛рд░ рдХреНрд╖рдорддрд╛ рджреНрд╡рд╛рд░рд╛ рджрд░-рд╕реАрдорд┐рдд
- рдорд╛рдирдХ RPC рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЕрднреА рднреА рдЖрд╡рд╢реНрдпрдХ

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/mining.cpp`

---

## PoCX рдорд╛рдЗрдирд┐рдВрдЧ RPCs

### get_mining_info

**рд╢реНрд░реЗрдгреА**: рдорд╛рдЗрдирд┐рдВрдЧ
**рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ
**рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ

**рдЙрджреНрджреЗрд╢реНрдп**: рдмрд╛рд╣рд░реА рдорд╛рдЗрдирд░реНрд╕ рдХреЗ рд▓рд┐рдП plot рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реНрдХреИрди рдХрд░рдиреЗ рдФрд░ deadlines рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╡рд░реНрддрдорд╛рди рдорд╛рдЗрдирд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рд▓реМрдЯрд╛рддрд╛ рд╣реИред

**рдкреИрд░рд╛рдореАрдЯрд░**: рдХреЛрдИ рдирд╣реАрдВ

**рд░рд┐рдЯрд░реНрди рдорд╛рди**:
```json
{
  "generation_signature": "abc123...",       // рд╣реЗрдХреНрд╕, 64 рдЕрдХреНрд╖рд░
  "base_target": 36650387593,                // рд╕рдВрдЦреНрдпрд╛рддреНрдордХ
  "height": 12345,                           // рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рдЕрдЧрд▓реЗ рдмреНрд▓реЙрдХ рдХреА рдКрдВрдЪрд╛рдИ
  "block_hash": "def456...",                 // рд╣реЗрдХреНрд╕, рдкрд┐рдЫрд▓рд╛ рдмреНрд▓реЙрдХ
  "target_quality": 18446744073709551615,    // uint64_max (рд╕рднреА рд╕рдорд╛рдзрд╛рди рд╕реНрд╡реАрдХреГрдд)
  "minimum_compression_level": 1,            // рд╕рдВрдЦреНрдпрд╛рддреНрдордХ
  "target_compression_level": 2              // рд╕рдВрдЦреНрдпрд╛рддреНрдордХ
}
```

**рдлрд╝реАрд▓реНрдб рд╡рд┐рд╡рд░рдг**:
- `generation_signature`: рдЗрд╕ рдмреНрд▓реЙрдХ рдКрдВрдЪрд╛рдИ рдХреЗ рд▓рд┐рдП рдирд┐рдпрддрд╛рддреНрдордХ рдорд╛рдЗрдирд┐рдВрдЧ рдПрдиреНрдЯреНрд░реЙрдкреА
- `base_target`: рд╡рд░реНрддрдорд╛рди рдХрдард┐рдирд╛рдИ (рдЙрдЪреНрдЪ = рдЖрд╕рд╛рди)
- `height`: рдорд╛рдЗрдирд░реНрд╕ рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рдмреНрд▓реЙрдХ рдКрдВрдЪрд╛рдИ
- `block_hash`: рдкрд┐рдЫрд▓реЗ рдмреНрд▓реЙрдХ рдХрд╛ рд╣реИрд╢ (рд╕реВрдЪрдирд╛рддреНрдордХ)
- `target_quality`: рдЧреБрдгрд╡рддреНрддрд╛ рд╕реАрдорд╛ (рд╡рд░реНрддрдорд╛рди рдореЗрдВ uint64_max, рдХреЛрдИ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдирд╣реАрдВ)
- `minimum_compression_level`: рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдиреНрдпреВрдирддрдо compression
- `target_compression_level`: рдЗрд╖реНрдЯрддрдо рдорд╛рдЗрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд╢рдВрд╕рд┐рдд compression

**рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `RPC_CLIENT_IN_INITIAL_DOWNLOAD`: рдиреЛрдб рдЕрднреА рднреА рд╕рд┐рдВрдХ рд╣реЛ рд░рд╣рд╛ рд╣реИ

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli get_mining_info
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/mining.cpp:get_mining_info()`

---

### submit_nonce

**рд╢реНрд░реЗрдгреА**: рдорд╛рдЗрдирд┐рдВрдЧ
**рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдЖрд╡рд╢реНрдпрдХ**: рд╣рд╛рдБ
**рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ**: рд╣рд╛рдБ (рдирд┐рдЬреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП)

**рдЙрджреНрджреЗрд╢реНрдп**: PoCX рдорд╛рдЗрдирд┐рдВрдЧ рд╕рдорд╛рдзрд╛рди рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ, time-bended рдлреЛрд░реНрдЬрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХрддрд╛рд░рдмрджреНрдз рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕рдордп рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмреНрд▓реЙрдХ рдмрдирд╛рддрд╛ рд╣реИред

**рдкреИрд░рд╛рдореАрдЯрд░**:
1. `height` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рдЖрд╡рд╢реНрдпрдХ) - рдмреНрд▓реЙрдХ рдКрдВрдЪрд╛рдИ
2. `generation_signature` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕, рдЖрд╡рд╢реНрдпрдХ) - Generation signature (64 рдЕрдХреНрд╖рд░)
3. `account_id` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - Plot account ID (40 рд╣реЗрдХреНрд╕ рдЕрдХреНрд╖рд░ = 20 рдмрд╛рдЗрдЯреНрд╕)
4. `seed` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - Plot seed (64 рд╣реЗрдХреНрд╕ рдЕрдХреНрд╖рд░ = 32 рдмрд╛рдЗрдЯреНрд╕)
5. `nonce` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рдЖрд╡рд╢реНрдпрдХ) - рдорд╛рдЗрдирд┐рдВрдЧ nonce
6. `compression` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рдЖрд╡рд╢реНрдпрдХ) - рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╕реНрдХреЗрд▓рд┐рдВрдЧ/compression рд╕реНрддрд░ (1-255)
7. `quality` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рд╡реИрдХрд▓реНрдкрд┐рдХ) - рдЧреБрдгрд╡рддреНрддрд╛ рдорд╛рди (рдЫреЛрдбрд╝рдиреЗ рдкрд░ рдкреБрдирд░реНрдЧрдгрдирд╛)

**рд░рд┐рдЯрд░реНрди рдорд╛рди** (рд╕рдлрд▓рддрд╛):
```json
{
  "accepted": true,
  "quality": 120,           // рд╕реЗрдХрдВрдб рдореЗрдВ рдХрдард┐рдирд╛рдИ-рд╕рдорд╛рдпреЛрдЬрд┐рдд deadline
  "poc_time": 45            // рд╕реЗрдХрдВрдб рдореЗрдВ time-bended рдлреЛрд░реНрдЬ рд╕рдордп
}
```

**рд░рд┐рдЯрд░реНрди рдорд╛рди** (рдЕрд╕реНрд╡реАрдХреГрдд):
```json
{
  "accepted": false,
  "error": "Generation signature mismatch"
}
```

**рд╕рддреНрдпрд╛рдкрди рдЪрд░рдг**:
1. **рдкреНрд░рд╛рд░реВрдк рд╕рддреНрдпрд╛рдкрди** (рдлрд╛рд╕реНрдЯ-рдлреЗрд▓):
   - Account ID: рдареАрдХ 40 рд╣реЗрдХреНрд╕ рдЕрдХреНрд╖рд░
   - Seed: рдареАрдХ 64 рд╣реЗрдХреНрд╕ рдЕрдХреНрд╖рд░
2. **рд╕рдВрджрд░реНрдн рд╕рддреНрдпрд╛рдкрди**:
   - рдКрдВрдЪрд╛рдИ рд╡рд░реНрддрдорд╛рди tip + 1 рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреА рдЪрд╛рд╣рд┐рдП
   - Generation signature рд╡рд░реНрддрдорд╛рди рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреА рдЪрд╛рд╣рд┐рдП
3. **рд╡реЙрд▓реЗрдЯ рд╕рддреНрдпрд╛рдкрди**:
   - рдкреНрд░рднрд╛рд╡реА рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ (рд╕рдХреНрд░рд┐рдп рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪреЗрдВ)
   - рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╡реЙрд▓реЗрдЯ рдХреЗ рдкрд╛рд╕ рдкреНрд░рднрд╛рд╡реА рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдирд┐рдЬреА рдХреБрдВрдЬреА рд╣реИ
4. **рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрди** (рдорд╣рдВрдЧрд╛):
   - Compression рд╕реАрдорд╛рдУрдВ рдХреЗ рд╕рд╛рде PoCX рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдВ
   - рд░реЙ рдЧреБрдгрд╡рддреНрддрд╛ рдЧрдгрдирд╛ рдХрд░реЗрдВ
5. **рд╢реЗрдбреНрдпреВрд▓рд░ рд╕рдмрдорд┐рд╢рди**:
   - Time-bended рдлреЛрд░реНрдЬрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП nonce рдХрддрд╛рд░рдмрджреНрдз рдХрд░реЗрдВ
   - рдмреНрд▓реЙрдХ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ forge_time рдкрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛

**рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `RPC_INVALID_PARAMETER`: рдЕрдорд╛рдиреНрдп рдкреНрд░рд╛рд░реВрдк (account_id, seed) рдпрд╛ рдКрдВрдЪрд╛рдИ рдмреЗрдореЗрд▓
- `RPC_VERIFY_REJECTED`: Generation signature рдмреЗрдореЗрд▓ рдпрд╛ рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрди рд╡рд┐рдлрд▓
- `RPC_INVALID_ADDRESS_OR_KEY`: рдкреНрд░рднрд╛рд╡реА рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдирд┐рдЬреА рдХреБрдВрдЬреА рдирд╣реАрдВ
- `RPC_CLIENT_IN_INITIAL_DOWNLOAD`: рд╕рдмрдорд┐рд╢рди рдХрддрд╛рд░ рднрд░реА рд╣реБрдИ
- `RPC_INTERNAL_ERROR`: PoCX рд╢реЗрдбреНрдпреВрд▓рд░ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓

**рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрди рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `0`: VALIDATION_SUCCESS
- `-1`: VALIDATION_ERROR_NULL_POINTER
- `-2`: VALIDATION_ERROR_INVALID_INPUT
- `-100`: VALIDATION_ERROR_GENERATION_SIGNATURE_PARSE
- `-101`: VALIDATION_ERROR_GENERATION_SIGNATURE_DECODE
- `-106`: VALIDATION_ERROR_QUALITY_CALCULATION

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli submit_nonce 12345 \
  "abc123..." \
  "1234567890abcdef1234567890abcdef12345678" \
  "plot_seed_64_hex_characters..." \
  999888777 \
  1
```

**рдиреЛрдЯреНрд╕**:
- рд╕рдмрдорд┐рд╢рди рдЕрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд╣реИ - RPC рддреБрд░рдВрдд рд▓реМрдЯрддрд╛ рд╣реИ, рдмреНрд▓реЙрдХ рдмрд╛рдж рдореЗрдВ рдлреЛрд░реНрдЬ рд╣реЛрддрд╛ рд╣реИ
- Time Bending рдиреЗрдЯрд╡рд░реНрдХ-рд╡реНрдпрд╛рдкреА plot рд╕реНрдХреИрдирд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреЗ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдореЗрдВ рд╡рд┐рд▓рдВрдм рдХрд░рддрд╛ рд╣реИ
- рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо: рдпрджрд┐ plot рдЕрд╕рд╛рдЗрди рд╣реИ, рддреЛ рд╡реЙрд▓реЗрдЯ рдХреЗ рдкрд╛рд╕ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдкрддреЗ рдХреА рдХреБрдВрдЬреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП
- Compression рд╕реАрдорд╛рдПрдВ рдмреНрд▓реЙрдХ рдКрдВрдЪрд╛рдИ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рд╕рдорд╛рдпреЛрдЬрд┐рдд

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/mining.cpp:submit_nonce()`

---

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ RPCs

### get_assignment

**рд╢реНрд░реЗрдгреА**: рдорд╛рдЗрдирд┐рдВрдЧ
**рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ
**рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ

**рдЙрджреНрджреЗрд╢реНрдп**: Plot рдкрддреЗ рдХреЗ рд▓рд┐рдП рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕реНрдерд┐рддрд┐ рдХреНрд╡реЗрд░реА рдХрд░реЗрдВред рдХреЗрд╡рд▓-рдкрдврд╝рдиреЗ, рдХреЛрдИ рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВред

**рдкреИрд░рд╛рдореАрдЯрд░**:
1. `plot_address` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - Plot рдкрддрд╛ (bech32 P2WPKH рдкреНрд░рд╛рд░реВрдк)
2. `height` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рд╡реИрдХрд▓реНрдкрд┐рдХ) - рдХреНрд╡реЗрд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреНрд▓реЙрдХ рдКрдВрдЪрд╛рдИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: рд╡рд░реНрддрдорд╛рди tip)

**рд░рд┐рдЯрд░реНрди рдорд╛рди** (рдХреЛрдИ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдирд╣реАрдВ):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": false,
  "state": "UNASSIGNED"
}
```

**рд░рд┐рдЯрд░реНрди рдорд╛рди** (рд╕рдХреНрд░рд┐рдп рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": true,
  "state": "ASSIGNED",
  "forging_address": "pocx1qforger...",
  "assignment_txid": "abc123...",
  "assignment_height": 12000,
  "activation_height": 12030
}
```

**рд░рд┐рдЯрд░реНрди рдорд╛рди** (рдирд┐рд░рд╕реНрдд рд╣реЛ рд░рд╣рд╛):
```json
{
  "plot_address": "pocx1qplot...",
  "height": 12345,
  "has_assignment": true,
  "state": "REVOKING",
  "forging_address": "pocx1qforger...",
  "assignment_txid": "abc123...",
  "assignment_height": 12000,
  "activation_height": 12030,
  "revoked": true,
  "revocation_txid": "def456...",
  "revocation_height": 12300,
  "revocation_effective_height": 13020
}
```

**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕реНрдерд┐рддрд┐рдпрд╛рдВ**:
- `UNASSIGNED`: рдХреЛрдИ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдореМрдЬреВрдж рдирд╣реАрдВ
- `ASSIGNING`: рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ tx рдкреБрд╖реНрдЯрд┐, рд╕рдХреНрд░рд┐рдпрдг рд╡рд┐рд▓рдВрдм рдкреНрд░рдЧрддрд┐ рдореЗрдВ
- `ASSIGNED`: рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп, рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрдзрд┐рдХрд╛рд░ рдкреНрд░рддреНрдпрд╛рдпреЛрдЬрд┐рдд
- `REVOKING`: рдирд┐рд░рд╕реНрддреАрдХрд░рдг tx рдкреБрд╖реНрдЯрд┐, рд╡рд┐рд▓рдВрдм рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рддрдХ рдЕрднреА рднреА рд╕рдХреНрд░рд┐рдп
- `REVOKED`: рдирд┐рд░рд╕реНрддреАрдХрд░рдг рдкреВрд░реНрдг, рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрдзрд┐рдХрд╛рд░ plot рдорд╛рд▓рд┐рдХ рдХреЛ рд▓реМрдЯреЗ

**рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `RPC_INVALID_ADDRESS_OR_KEY`: рдЕрдорд╛рдиреНрдп рдкрддрд╛ рдпрд╛ P2WPKH (bech32) рдирд╣реАрдВ

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli get_assignment "pocx1qplot..."
bitcoin-cli get_assignment "pocx1qplot..." 800000
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/assignments.cpp:get_assignment()`

---

### create_assignment

**рд╢реНрд░реЗрдгреА**: рд╡реЙрд▓реЗрдЯ
**рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ
**рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ**: рд╣рд╛рдБ (рд▓реЛрдбреЗрдб рдФрд░ рдЕрдирд▓реЙрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП)

**рдЙрджреНрджреЗрд╢реНрдп**: рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрдзрд┐рдХрд╛рд░ рджреВрд╕рд░реЗ рдкрддреЗ (рдЬреИрд╕реЗ, рдорд╛рдЗрдирд┐рдВрдЧ рдкреВрд▓) рдХреЛ рдкреНрд░рддреНрдпрд╛рдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд▓реЗрдирджреЗрди рдмрдирд╛рдПрдВред

**рдкреИрд░рд╛рдореАрдЯрд░**:
1. `plot_address` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - Plot рдорд╛рд▓рд┐рдХ рдкрддрд╛ (рдирд┐рдЬреА рдХреБрдВрдЬреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, P2WPKH bech32)
2. `forging_address` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрдзрд┐рдХрд╛рд░ рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрддрд╛ (P2WPKH bech32)
3. `fee_rate` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рд╡реИрдХрд▓реНрдкрд┐рдХ) - BTC/kvB рдореЗрдВ рд╢реБрд▓реНрдХ рджрд░ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: 10├Ч minRelayFee)

**рд░рд┐рдЯрд░реНрди рдорд╛рди**:
```json
{
  "txid": "abc123...",
  "hex": "020000...",
  "plot_address": "pocx1qplot...",
  "forging_address": "pocx1qforger..."
}
```

**рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ**:
- рд╡реЙрд▓реЗрдЯ рд▓реЛрдбреЗрдб рдФрд░ рдЕрдирд▓реЙрдХ
- рд╡реЙрд▓реЗрдЯ рдореЗрдВ plot_address рдХреЗ рд▓рд┐рдП рдирд┐рдЬреА рдХреБрдВрдЬреА
- рджреЛрдиреЛрдВ рдкрддреЗ P2WPKH (bech32 рдкреНрд░рд╛рд░реВрдк: pocx1q... mainnet, tpocx1q... testnet) рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП
- Plot рдкрддреЗ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ UTXOs рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП (рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╕рд┐рджреНрдз рдХрд░рддрд╛ рд╣реИ)
- Plot рдореЗрдВ рд╕рдХреНрд░рд┐рдп рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдкрд╣рд▓реЗ рдирд┐рд░рд╕реНрдд рдХрд░реЗрдВ)

**рд▓реЗрдирджреЗрди рд╕рдВрд░рдЪрдирд╛**:
- Input: Plot рдкрддреЗ рд╕реЗ UTXO (рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╕рд┐рджреНрдз рдХрд░рддрд╛ рд╣реИ)
- Output: OP_RETURN (46 рдмрд╛рдЗрдЯреНрд╕): `POCX` рдорд╛рд░реНрдХрд░ + plot_address (20 рдмрд╛рдЗрдЯреНрд╕) + forging_address (20 рдмрд╛рдЗрдЯреНрд╕)
- Output: рд╡реЙрд▓реЗрдЯ рдореЗрдВ Change рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛

**рд╕рдХреНрд░рд┐рдпрдг**:
- рдкреБрд╖реНрдЯрд┐ рдкрд░ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ ASSIGNING рдмрди рдЬрд╛рддрд╛ рд╣реИ
- `nForgingAssignmentDelay` рдмреНрд▓реЙрдХ рдХреЗ рдмрд╛рдж ACTIVE рдмрди рдЬрд╛рддрд╛ рд╣реИ
- рд╡рд┐рд▓рдВрдм рдЪреЗрди forks рдХреЗ рджреМрд░рд╛рди рддреЗрдЬрд╝ рдкреБрдирд░реНрдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд░реЛрдХрддрд╛ рд╣реИ

**рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `RPC_WALLET_NOT_FOUND`: рдХреЛрдИ рд╡реЙрд▓реЗрдЯ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ
- `RPC_WALLET_UNLOCK_NEEDED`: рд╡реЙрд▓реЗрдЯ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдФрд░ рд▓реЙрдХ
- `RPC_WALLET_ERROR`: рд▓реЗрдирджреЗрди рдирд┐рд░реНрдорд╛рдг рд╡рд┐рдлрд▓
- `RPC_INVALID_ADDRESS_OR_KEY`: рдЕрдорд╛рдиреНрдп рдкрддрд╛ рдкреНрд░рд╛рд░реВрдк

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli create_assignment "pocx1qplot..." "pocx1qforger..."
bitcoin-cli create_assignment "pocx1qplot..." "pocx1qforger..." 0.0001
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/assignments_wallet.cpp:create_assignment()`

---

### revoke_assignment

**рд╢реНрд░реЗрдгреА**: рд╡реЙрд▓реЗрдЯ
**рдорд╛рдЗрдирд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдЖрд╡рд╢реНрдпрдХ**: рдирд╣реАрдВ
**рд╡реЙрд▓реЗрдЯ рдЖрд╡рд╢реНрдпрдХ**: рд╣рд╛рдБ (рд▓реЛрдбреЗрдб рдФрд░ рдЕрдирд▓реЙрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП)

**рдЙрджреНрджреЗрд╢реНрдп**: рдореМрдЬреВрджрд╛ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдирд┐рд░рд╕реНрдд рдХрд░реЗрдВ, plot рдорд╛рд▓рд┐рдХ рдХреЛ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрдзрд┐рдХрд╛рд░ рд▓реМрдЯрд╛рдПрдВред

**рдкреИрд░рд╛рдореАрдЯрд░**:
1. `plot_address` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, рдЖрд╡рд╢реНрдпрдХ) - Plot рдкрддрд╛ (рдирд┐рдЬреА рдХреБрдВрдЬреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, P2WPKH bech32)
2. `fee_rate` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ, рд╡реИрдХрд▓реНрдкрд┐рдХ) - BTC/kvB рдореЗрдВ рд╢реБрд▓реНрдХ рджрд░ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: 10├Ч minRelayFee)

**рд░рд┐рдЯрд░реНрди рдорд╛рди**:
```json
{
  "txid": "def456...",
  "hex": "020000...",
  "plot_address": "pocx1qplot..."
}
```

**рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ**:
- рд╡реЙрд▓реЗрдЯ рд▓реЛрдбреЗрдб рдФрд░ рдЕрдирд▓реЙрдХ
- рд╡реЙрд▓реЗрдЯ рдореЗрдВ plot_address рдХреЗ рд▓рд┐рдП рдирд┐рдЬреА рдХреБрдВрдЬреА
- Plot рдкрддрд╛ P2WPKH (bech32 рдкреНрд░рд╛рд░реВрдк) рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП
- Plot рдкрддреЗ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ UTXOs рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП

**рд▓реЗрдирджреЗрди рд╕рдВрд░рдЪрдирд╛**:
- Input: Plot рдкрддреЗ рд╕реЗ UTXO (рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рд╕рд┐рджреНрдз рдХрд░рддрд╛ рд╣реИ)
- Output: OP_RETURN (26 рдмрд╛рдЗрдЯреНрд╕): `XCOP` рдорд╛рд░реНрдХрд░ + plot_address (20 рдмрд╛рдЗрдЯреНрд╕)
- Output: рд╡реЙрд▓реЗрдЯ рдореЗрдВ Change рд▓реМрдЯрд╛рдпрд╛ рдЧрдпрд╛

**рдкреНрд░рднрд╛рд╡**:
- рд╕реНрдерд┐рддрд┐ рддреБрд░рдВрдд REVOKING рдореЗрдВ рд╕рдВрдХреНрд░рдорд┐рдд
- рдлреЛрд░реНрдЬрд┐рдВрдЧ рдкрддрд╛ рд╡рд┐рд▓рдВрдм рдЕрд╡рдзрд┐ рдХреЗ рджреМрд░рд╛рди рдЕрднреА рднреА рдлреЛрд░реНрдЬ рдХрд░ рд╕рдХрддрд╛ рд╣реИ
- `nForgingRevocationDelay` рдмреНрд▓реЙрдХ рдХреЗ рдмрд╛рдж REVOKED рдмрди рдЬрд╛рддрд╛ рд╣реИ
- рдирд┐рд░рд╕реНрддреАрдХрд░рдг рдкреНрд░рднрд╛рд╡реА рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж Plot рдорд╛рд▓рд┐рдХ рдлреЛрд░реНрдЬ рдХрд░ рд╕рдХрддрд╛ рд╣реИ
- рдирд┐рд░рд╕реНрддреАрдХрд░рдг рдкреВрд░реНрдг рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдирдпрд╛ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ

**рддреНрд░реБрдЯрд┐ рдХреЛрдб**:
- `RPC_WALLET_NOT_FOUND`: рдХреЛрдИ рд╡реЙрд▓реЗрдЯ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ
- `RPC_WALLET_UNLOCK_NEEDED`: рд╡реЙрд▓реЗрдЯ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдФрд░ рд▓реЙрдХ
- `RPC_WALLET_ERROR`: рд▓реЗрдирджреЗрди рдирд┐рд░реНрдорд╛рдг рд╡рд┐рдлрд▓

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli revoke_assignment "pocx1qplot..."
bitcoin-cli revoke_assignment "pocx1qplot..." 0.0001
```

**рдиреЛрдЯреНрд╕**:
- Idempotent: рдХреЛрдИ рд╕рдХреНрд░рд┐рдп рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рди рд╣реЛрдиреЗ рдкрд░ рднреА рдирд┐рд░рд╕реНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
- рдПрдХ рдмрд╛рд░ рд╕рдмрдорд┐рдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдирд┐рд░рд╕реНрддреАрдХрд░рдг рд░рджреНрдж рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/pocx/rpc/assignments_wallet.cpp:revoke_assignment()`

---

## рд╕рдВрд╢реЛрдзрд┐рдд рдмреНрд▓реЙрдХрдЪреЗрди RPCs

### getdifficulty

**PoCX рд╕рдВрд╢реЛрдзрди**:
- **рдЧрдгрдирд╛**: `reference_base_target / current_base_target`
- **рд╕рдВрджрд░реНрдн**: 1 TiB рдиреЗрдЯрд╡рд░реНрдХ рдХреНрд╖рдорддрд╛ (base_target = 36650387593)
- **рд╡реНрдпрд╛рдЦреНрдпрд╛**: TiB рдореЗрдВ рдЕрдиреБрдорд╛рдирд┐рдд рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд╖рдорддрд╛
  - рдЙрджрд╛рд╣рд░рдг: `1.0` = ~1 TiB
  - рдЙрджрд╛рд╣рд░рдг: `1024.0` = ~1 PiB
- **PoW рд╕реЗ рдЕрдВрддрд░**: рд╣реИрд╢ рдкрд╛рд╡рд░ рдирд╣реАрдВ, рдХреНрд╖рдорддрд╛ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli getdifficulty
# рд▓реМрдЯрд╛рддрд╛ рд╣реИ: 2048.5 (рдиреЗрдЯрд╡рд░реНрдХ ~2 PiB)
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/blockchain.cpp`

---

### getblockheader

**PoCX рдЬреЛрдбрд╝реЗ рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `time_since_last_block` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рдкрд┐рдЫрд▓реЗ рдмреНрд▓реЙрдХ рд╕реЗ рд╕реЗрдХрдВрдб (mediantime рдХреА рдЬрдЧрд╣ рд▓реЗрддрд╛ рд╣реИ)
- `poc_time` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рд╕реЗрдХрдВрдб рдореЗрдВ Time-bended рдлреЛрд░реНрдЬ рд╕рдордп
- `base_target` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - PoCX рдХрдард┐рдирд╛рдИ base target
- `generation_signature` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - Generation signature
- `pocx_proof` (рдСрдмреНрдЬреЗрдХреНрдЯ):
  - `account_id` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - Plot account ID (20 рдмрд╛рдЗрдЯреНрд╕)
  - `seed` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - Plot seed (32 рдмрд╛рдЗрдЯреНрд╕)
  - `nonce` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рдорд╛рдЗрдирд┐рдВрдЧ nonce
  - `compression` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рд╕реНрддрд░
  - `quality` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рджрд╛рд╡рд╛ рдХреА рдЧрдИ рдЧреБрдгрд╡рддреНрддрд╛ рдорд╛рди
- `pubkey` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - рдмреНрд▓реЙрдХ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛ рдХреА рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреБрдВрдЬреА (33 рдмрд╛рдЗрдЯреНрд╕)
- `signer_address` (рд╕реНрдЯреНрд░рд┐рдВрдЧ) - рдмреНрд▓реЙрдХ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рдХрд░реНрддрд╛ рдХрд╛ рдкрддрд╛
- `signature` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - рдмреНрд▓реЙрдХ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ (65 рдмрд╛рдЗрдЯреНрд╕)

**PoCX рд╣рдЯрд╛рдП рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `mediantime` - рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛ (time_since_last_block рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд)

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli getblockheader <blockhash>
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/blockchain.cpp`

---

### getblock

**PoCX рд╕рдВрд╢реЛрдзрди**: getblockheader рдХреЗ рд╕рдорд╛рди, рд╕рд╛рде рд╣реА рдкреВрд░реНрдг рд▓реЗрдирджреЗрди рдбреЗрдЯрд╛

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli getblock <blockhash>
bitcoin-cli getblock <blockhash> 2  # tx рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде verbose
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/blockchain.cpp`

---

### getblockchaininfo

**PoCX рдЬреЛрдбрд╝реЗ рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `base_target` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рд╡рд░реНрддрдорд╛рди base target
- `generation_signature` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - рд╡рд░реНрддрдорд╛рди generation signature

**PoCX рд╕рдВрд╢реЛрдзрд┐рдд рдлрд╝реАрд▓реНрдб**:
- `difficulty` - PoCX рдЧрдгрдирд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рдХреНрд╖рдорддрд╛-рдЖрдзрд╛рд░рд┐рдд)

**PoCX рд╣рдЯрд╛рдП рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `mediantime` - рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli getblockchaininfo
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/blockchain.cpp`

---

### getblocktemplate

**PoCX рдЬреЛрдбрд╝реЗ рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `generation_signature` (рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реЗрдХреНрд╕) - рдкреВрд▓ рдорд╛рдЗрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП
- `base_target` (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) - рдкреВрд▓ рдорд╛рдЗрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП

**PoCX рд╣рдЯрд╛рдП рдЧрдП рдлрд╝реАрд▓реНрдб**:
- `target` - рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛ (PoW-рд╡рд┐рд╢рд┐рд╖реНрдЯ)
- `noncerange` - рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛ (PoW-рд╡рд┐рд╢рд┐рд╖реНрдЯ)
- `bits` - рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛ (PoW-рд╡рд┐рд╢рд┐рд╖реНрдЯ)

**рдиреЛрдЯреНрд╕**:
- рдмреНрд▓реЙрдХ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЕрднреА рднреА рдкреВрд░реНрдг рд▓реЗрдирджреЗрди рдбреЗрдЯрд╛ рд╢рд╛рдорд┐рд▓
- рд╕рдордиреНрд╡рд┐рдд рдорд╛рдЗрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдкреВрд▓ рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ

**рдЙрджрд╛рд╣рд░рдг**:
```bash
bitcoin-cli getblocktemplate '{"rules": ["segwit"]}'
```

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/mining.cpp`

---

## рдЕрдХреНрд╖рдо RPCs

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд PoW-рд╡рд┐рд╢рд┐рд╖реНрдЯ RPCs PoCX рдореЛрдб рдореЗрдВ **рдЕрдХреНрд╖рдо** рд╣реИрдВ:

### getnetworkhashps
- **рдХрд╛рд░рдг**: рд╣реИрд╢ рд░реЗрдЯ Proof of Capacity рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ
- **рд╡рд┐рдХрд▓реНрдк**: рдиреЗрдЯрд╡рд░реНрдХ рдХреНрд╖рдорддрд╛ рдЕрдиреБрдорд╛рди рдХреЗ рд▓рд┐рдП `getdifficulty` рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

### getmininginfo
- **рдХрд╛рд░рдг**: PoW-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА рд▓реМрдЯрд╛рддрд╛ рд╣реИ
- **рд╡рд┐рдХрд▓реНрдк**: `get_mining_info` (PoCX-рд╡рд┐рд╢рд┐рд╖реНрдЯ) рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

### generate, generatetoaddress, generatetodescriptor, generateblock
- **рдХрд╛рд░рдг**: CPU рдорд╛рдЗрдирд┐рдВрдЧ PoCX рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ (рдкреВрд░реНрд╡-рдЙрддреНрдкрдиреНрди plots рдЖрд╡рд╢реНрдпрдХ)
- **рд╡рд┐рдХрд▓реНрдк**: рдмрд╛рд╣рд░реА plotter + miner + `submit_nonce` рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди**: `src/rpc/mining.cpp` (рдЬрдм ENABLE_POCX рдкрд░рд┐рднрд╛рд╖рд┐рдд рддреЛ RPCs рддреНрд░реБрдЯрд┐ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВ)

---

## рдПрдХреАрдХрд░рдг рдЙрджрд╛рд╣рд░рдг

### рдмрд╛рд╣рд░реА рдорд╛рдЗрдирд░ рдПрдХреАрдХрд░рдг

**рдмреБрдирд┐рдпрд╛рджреА рдорд╛рдЗрдирд┐рдВрдЧ рд▓реВрдк**:
```python
import requests
import time

RPC_URL = "http://user:pass@localhost:8332"

def rpc_call(method, params=[]):
    payload = {
        "jsonrpc": "2.0",
        "id": "miner",
        "method": method,
        "params": params
    }
    response = requests.post(RPC_URL, json=payload)
    return response.json()["result"]

# рдорд╛рдЗрдирд┐рдВрдЧ рд▓реВрдк
while True:
    # 1. рдорд╛рдЗрдирд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
    info = rpc_call("get_mining_info")

    gen_sig = info["generation_signature"]
    base_target = info["base_target"]
    height = info["height"]
    min_compression = info["minimum_compression_level"]
    target_compression = info["target_compression_level"]

    # 2. Plot рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реНрдХреИрди рдХрд░реЗрдВ (рдмрд╛рд╣рд░реА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди)
    best_nonce = scan_plots(gen_sig, height)

    # 3. рд╕рд░реНрд╡реЛрддреНрддрдо рд╕рдорд╛рдзрд╛рди рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ
    result = rpc_call("submit_nonce", [
        height,
        gen_sig,
        best_nonce["account_id"],
        best_nonce["seed"],
        best_nonce["nonce"]
    ])

    if result["accepted"]:
        print(f"рд╕рдорд╛рдзрд╛рди рд╕реНрд╡реАрдХреГрдд! рдЧреБрдгрд╡рддреНрддрд╛: {result['quality']}s, "
              f"рдлреЛрд░реНрдЬ рд╕рдордп: {result['poc_time']}s")

    # 4. рдЕрдЧрд▓реЗ рдмреНрд▓реЙрдХ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ
    time.sleep(10)  # рдкреЛрд▓ рдЕрдВрддрд░рд╛рд▓
```

---

### рдкреВрд▓ рдПрдХреАрдХрд░рдг рдкреИрдЯрд░реНрди

**рдкреВрд▓ рд╕рд░реНрд╡рд░ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ**:
1. рдорд╛рдЗрдирд░реНрд╕ рдкреВрд▓ рдкрддреЗ рдХреЛ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ
2. рдкреВрд▓ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдкрддреЗ рдХреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╡реЙрд▓реЗрдЯ рдЪрд▓рд╛рддрд╛ рд╣реИ
3. рдкреВрд▓ `get_mining_info` рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдорд╛рдЗрдирд░реНрд╕ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ
4. рдорд╛рдЗрдирд░реНрд╕ рдкреВрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдорд╛рдзрд╛рди рд╕рдмрдорд┐рдЯ рдХрд░рддреЗ рд╣реИрдВ (рд╕реАрдзреЗ рдЪреЗрди рдХреЛ рдирд╣реАрдВ)
5. рдкреВрд▓ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдкреВрд▓ рдХреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде `submit_nonce` рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ
6. рдкреВрд▓ рдкреВрд▓ рдиреАрддрд┐ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкреБрд░рд╕реНрдХрд╛рд░ рд╡рд┐рддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ

**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдкреНрд░рдмрдВрдзрди**:
```bash
# рдорд╛рдЗрдирд░ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдмрдирд╛рддрд╛ рд╣реИ (рдорд╛рдЗрдирд░ рдХреЗ рд╡реЙрд▓реЗрдЯ рд╕реЗ)
bitcoin-cli create_assignment "pocx1qminer_plot..." "pocx1qpool..."

# рд╕рдХреНрд░рд┐рдпрдг рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ (mainnet рдкрд░ 30 рдмреНрд▓реЙрдХ)

# рдкреВрд▓ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ
bitcoin-cli get_assignment "pocx1qminer_plot..."

# рдкреВрд▓ рдЕрдм рдЗрд╕ plot рдХреЗ рд▓рд┐рдП nonces рд╕рдмрдорд┐рдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ
# (рдкреВрд▓ рд╡реЙрд▓реЗрдЯ рдореЗрдВ pocx1qpool... рдирд┐рдЬреА рдХреБрдВрдЬреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП)
```

---

### рдмреНрд▓реЙрдХ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░ рдХреНрд╡реЗрд░реА

**PoCX рдмреНрд▓реЙрдХ рдбреЗрдЯрд╛ рдХреНрд╡реЗрд░реА рдХрд░рдирд╛**:
```bash
# рдирд╡реАрдирддрдо рдмреНрд▓реЙрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
BLOCK_HASH=$(bitcoin-cli getbestblockhash)

# PoCX рдкреНрд░рдорд╛рдг рдХреЗ рд╕рд╛рде рдмреНрд▓реЙрдХ рд╡рд┐рд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ
BLOCK=$(bitcoin-cli getblock $BLOCK_HASH 2)

# PoCX-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝реАрд▓реНрдб рдирд┐рдХрд╛рд▓реЗрдВ
echo $BLOCK | jq '{
  height: .height,
  time_since_last: .time_since_last_block,
  poc_time: .poc_time,
  base_target: .base_target,
  generation_signature: .generation_signature,
  pocx_proof: .pocx_proof,
  miner_address: .tx[0].vout[0].scriptPubKey.address
}'
```

**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд▓реЗрдирджреЗрди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛**:
```bash
# OP_RETURN рдХреЗ рд▓рд┐рдП рд▓реЗрдирджреЗрди рд╕реНрдХреИрди рдХрд░реЗрдВ
TX=$(bitcoin-cli getrawtransaction <txid> 1)

# рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдорд╛рд░реНрдХрд░ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪреЗрдВ (POCX = 0x504f4358)
echo $TX | jq '.vout[] | select(.scriptPubKey.asm | startswith("OP_RETURN 504f4358"))'
```

---

## рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ

### рд╕рд╛рдорд╛рдиреНрдп рддреНрд░реБрдЯрд┐ рдкреИрдЯрд░реНрди

**рдКрдВрдЪрд╛рдИ рдмреЗрдореЗрд▓**:
```json
{
  "accepted": false,
  "error": "Height mismatch: submitted 12345, current 12346"
}
```
**рд╕рдорд╛рдзрд╛рди**: рдорд╛рдЗрдирд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА рдлрд┐рд░ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдЪреЗрди рдЖрдЧреЗ рдмрдврд╝ рдЧрдИ

**Generation Signature рдмреЗрдореЗрд▓**:
```json
{
  "accepted": false,
  "error": "Generation signature mismatch"
}
```
**рд╕рдорд╛рдзрд╛рди**: рдорд╛рдЗрдирд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА рдлрд┐рд░ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдирдпрд╛ рдмреНрд▓реЙрдХ рдЖрдпрд╛

**рдХреЛрдИ рдирд┐рдЬреА рдХреБрдВрдЬреА рдирд╣реАрдВ**:
```json
{
  "code": -5,
  "message": "No private key available for effective signer"
}
```
**рд╕рдорд╛рдзрд╛рди**: Plot рдпрд╛ рдлреЛрд░реНрдЬрд┐рдВрдЧ рдкрддреЗ рдХреЗ рд▓рд┐рдП рдХреБрдВрдЬреА рдЖрдпрд╛рдд рдХрд░реЗрдВ

**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдпрдг рд▓рдВрдмрд┐рдд**:
```json
{
  "plot_address": "pocx1qplot...",
  "state": "ASSIGNING",
  "activation_height": 12030
}
```
**рд╕рдорд╛рдзрд╛рди**: рд╕рдХреНрд░рд┐рдпрдг рд╡рд┐рд▓рдВрдм рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ

---

## рдХреЛрдб рд╕рдВрджрд░реНрдн

**рдорд╛рдЗрдирд┐рдВрдЧ RPCs**: `src/pocx/rpc/mining.cpp`
**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ RPCs**: `src/pocx/rpc/assignments.cpp`, `src/pocx/rpc/assignments_wallet.cpp`
**рдмреНрд▓реЙрдХрдЪреЗрди RPCs**: `src/rpc/blockchain.cpp`
**рдкреНрд░рдорд╛рдг рд╕рддреНрдпрд╛рдкрди**: `src/pocx/consensus/validation.cpp`, `src/pocx/consensus/pocx.cpp`
**рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕реНрдерд┐рддрд┐**: `src/pocx/assignments/assignment_state.cpp`
**рд▓реЗрдирджреЗрди рдирд┐рд░реНрдорд╛рдг**: `src/pocx/assignments/transactions.cpp`

---

## рдХреНрд░реЙрд╕-рд░реЗрдлрд░реЗрдВрд╕

рд╕рдВрдмрдВрдзрд┐рдд рдЕрдзреНрдпрд╛рдп:
- [рдЕрдзреНрдпрд╛рдп 3: рд╕рд╣рдорддрд┐ рдФрд░ рдорд╛рдЗрдирд┐рдВрдЧ](3-consensus-and-mining.md) - рдорд╛рдЗрдирд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╡рд┐рд╡рд░рдг
- [рдЕрдзреНрдпрд╛рдп 4: рдлреЛрд░реНрдЬрд┐рдВрдЧ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ](4-forging-assignments.md) - рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░
- [рдЕрдзреНрдпрд╛рдп 6: рдиреЗрдЯрд╡рд░реНрдХ рдкреИрд░рд╛рдореАрдЯрд░](6-network-parameters.md) - рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рд╡рд┐рд▓рдВрдм рдорд╛рди
- [рдЕрдзреНрдпрд╛рдп 8: рд╡реЙрд▓реЗрдЯ рдЧрд╛рдЗрдб](8-wallet-guide.md) - рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП GUI

---

[тЖР рдкрд┐рдЫрд▓рд╛: рдиреЗрдЯрд╡рд░реНрдХ рдкреИрд░рд╛рдореАрдЯрд░](6-network-parameters.md) | [ЁЯУШ рд╡рд┐рд╖рдп-рд╕реВрдЪреА](index.md) | [рдЕрдЧрд▓рд╛: рд╡реЙрд▓реЗрдЯ рдЧрд╛рдЗрдб тЖТ](8-wallet-guide.md)
