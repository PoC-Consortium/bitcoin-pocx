[← Προηγούμενο: Χρονικός Συγχρονισμός](5-timing-security.md) | [Πίνακας Περιεχομένων](index.md) | [Επόμενο: Αναφορά RPC →](7-rpc-reference.md)

---

# Κεφάλαιο 6: Παράμετροι Δικτύου και Διαμόρφωση

Πλήρης αναφορά για τη διαμόρφωση δικτύου Bitcoin-PoCX σε όλους τους τύπους δικτύου.

---

## Πίνακας Περιεχομένων

1. [Παράμετροι Genesis Block](#παράμετροι-genesis-block)
2. [Διαμόρφωση Chainparams](#διαμόρφωση-chainparams)
3. [Παράμετροι Συναίνεσης](#παράμετροι-συναίνεσης)
4. [Coinbase και Ανταμοιβές Block](#coinbase-και-ανταμοιβές-block)
5. [Δυναμική Κλιμάκωση](#δυναμική-κλιμάκωση)
6. [Διαμόρφωση Δικτύου](#διαμόρφωση-δικτύου)
7. [Δομή Καταλόγου Δεδομένων](#δομή-καταλόγου-δεδομένων)

---

## Παράμετροι Genesis Block

### Υπολογισμός Base Target

**Τύπος**: `genesis_base_target = 2^42 / block_time_seconds`

**Αιτιολόγηση**:
- Κάθε nonce αντιπροσωπεύει 256 KiB (64 bytes × 4096 scoops)
- 1 TiB = 2^22 nonces (υπόθεση αρχικής χωρητικότητας δικτύου)
- Αναμενόμενη ελάχιστη ποιότητα για n nonces ≈ 2^64 / n
- Για 1 TiB: E(quality) = 2^64 / 2^22 = 2^42
- Επομένως: base_target = 2^42 / block_time

**Υπολογισμένες Τιμές**:
- Mainnet/Testnet/Signet (120s): `36650387592`
- Regtest (1s): Χρησιμοποιεί λειτουργία βαθμονόμησης χαμηλής χωρητικότητας

### Μήνυμα Genesis

Όλα τα δίκτυα μοιράζονται το μήνυμα genesis του Bitcoin:
```
"The Times 03/Jan/2009 Chancellor on brink of second bailout for banks"
```

**Υλοποίηση**: `src/kernel/chainparams.cpp`

---

## Διαμόρφωση Chainparams

### Παράμετροι Mainnet

**Ταυτότητα Δικτύου**:
- **Magic Bytes**: `0xa7 0x3c 0x91 0x5e`
- **Προεπιλεγμένη Θύρα**: `8888`
- **Bech32 HRP**: `pocx`

**Προθέματα Διευθύνσεων** (Base58):
- PUBKEY_ADDRESS: `85` (οι διευθύνσεις αρχίζουν με 'P')
- SCRIPT_ADDRESS: `90` (οι διευθύνσεις αρχίζουν με 'R')
- SECRET_KEY: `128`

**Χρονισμός Block**:
- **Στόχος Χρόνου Block**: `120` δευτερόλεπτα (2 λεπτά)
- **Target Timespan**: `1209600` δευτερόλεπτα (14 ημέρες)
- **MAX_FUTURE_BLOCK_TIME**: `15` δευτερόλεπτα

**Ανταμοιβές Block**:
- **Αρχική Επιδότηση**: `10 BTC`
- **Διάστημα Halving**: `1050000` blocks (~4 χρόνια)
- **Αριθμός Halvings**: μέγιστα 64 halvings

**Προσαρμογή Δυσκολίας**:
- **Κυλιόμενο Παράθυρο**: `24` blocks
- **Προσαρμογή**: Κάθε block
- **Αλγόριθμος**: Εκθετικός κινητός μέσος όρος

**Καθυστερήσεις Ανάθεσης**:
- **Ενεργοποίηση**: `30` blocks (~1 ώρα)
- **Ανάκληση**: `720` blocks (~24 ώρες)

### Παράμετροι Testnet

**Ταυτότητα Δικτύου**:
- **Magic Bytes**: `0x6d 0xf2 0x48 0xb3`
- **Προεπιλεγμένη Θύρα**: `18888`
- **Bech32 HRP**: `tpocx`

**Προθέματα Διευθύνσεων** (Base58):
- PUBKEY_ADDRESS: `127`
- SCRIPT_ADDRESS: `132`
- SECRET_KEY: `255`

**Χρονισμός Block**:
- **Στόχος Χρόνου Block**: `120` δευτερόλεπτα
- **MAX_FUTURE_BLOCK_TIME**: `15` δευτερόλεπτα
- **Επιτρέπεται Ελάχιστη Δυσκολία**: `true`

**Ανταμοιβές Block**:
- **Αρχική Επιδότηση**: `10 BTC`
- **Διάστημα Halving**: `1050000` blocks

**Προσαρμογή Δυσκολίας**:
- **Κυλιόμενο Παράθυρο**: `24` blocks

**Καθυστερήσεις Ανάθεσης**:
- **Ενεργοποίηση**: `30` blocks (~1 ώρα)
- **Ανάκληση**: `720` blocks (~24 ώρες)

### Παράμετροι Regtest

**Ταυτότητα Δικτύου**:
- **Magic Bytes**: `0xfa 0xbf 0xb5 0xda`
- **Προεπιλεγμένη Θύρα**: `18444`
- **Bech32 HRP**: `rpocx`

**Προθέματα Διευθύνσεων** (Συμβατά με Bitcoin):
- PUBKEY_ADDRESS: `111`
- SCRIPT_ADDRESS: `196`
- SECRET_KEY: `239`

**Χρονισμός Block**:
- **Στόχος Χρόνου Block**: `1` δευτερόλεπτο (άμεση εξόρυξη για δοκιμές)
- **Target Timespan**: `86400` δευτερόλεπτα (1 ημέρα)
- **MAX_FUTURE_BLOCK_TIME**: `15` δευτερόλεπτα

**Ανταμοιβές Block**:
- **Αρχική Επιδότηση**: `10 BTC`
- **Διάστημα Halving**: `500` blocks

**Προσαρμογή Δυσκολίας**:
- **Κυλιόμενο Παράθυρο**: `24` blocks
- **Επιτρέπεται Ελάχιστη Δυσκολία**: `true`
- **Χωρίς Αναστόχευση**: `true`
- **Βαθμονόμηση Χαμηλής Χωρητικότητας**: `true` (χρησιμοποιεί βαθμονόμηση 16-nonce αντί 1 TiB)

**Καθυστερήσεις Ανάθεσης**:
- **Ενεργοποίηση**: `4` blocks (~4 δευτερόλεπτα)
- **Ανάκληση**: `8` blocks (~8 δευτερόλεπτα)

### Παράμετροι Signet

**Ταυτότητα Δικτύου**:
- **Magic Bytes**: Πρώτα 4 bytes του SHA256d(signet_challenge)
- **Προεπιλεγμένη Θύρα**: `38333`
- **Bech32 HRP**: `tpocx`

**Χρονισμός Block**:
- **Στόχος Χρόνου Block**: `120` δευτερόλεπτα
- **MAX_FUTURE_BLOCK_TIME**: `15` δευτερόλεπτα

**Ανταμοιβές Block**:
- **Αρχική Επιδότηση**: `10 BTC`
- **Διάστημα Halving**: `1050000` blocks

**Προσαρμογή Δυσκολίας**:
- **Κυλιόμενο Παράθυρο**: `24` blocks

---

## Παράμετροι Συναίνεσης

### Παράμετροι Χρονισμού

**MAX_FUTURE_BLOCK_TIME**: `15` δευτερόλεπτα
- Ειδικό για PoCX (το Bitcoin χρησιμοποιεί 2 ώρες)
- Αιτιολόγηση: Ο χρονισμός PoC απαιτεί επικύρωση σχεδόν πραγματικού χρόνου
- Blocks περισσότερο από 15s στο μέλλον απορρίπτονται

**Προειδοποίηση Χρονικής Μετατόπισης**: `10` δευτερόλεπτα
- Οι διαχειριστές προειδοποιούνται όταν το ρολόι κόμβου αποκλίνει >10s από τον χρόνο δικτύου
- Χωρίς επιβολή, μόνο ενημερωτικό

**Στόχοι Χρόνου Block**:
- Mainnet/Testnet/Signet: `120` δευτερόλεπτα
- Regtest: `1` δευτερόλεπτο

**TIMESTAMP_WINDOW**: `15` δευτερόλεπτα (ίσο με MAX_FUTURE_BLOCK_TIME)

**Υλοποίηση**: `src/chain.h`, `src/validation.cpp`

### Παράμετροι Προσαρμογής Δυσκολίας

**Μέγεθος Κυλιόμενου Παραθύρου**: `24` blocks (όλα τα δίκτυα)
- Εκθετικός κινητός μέσος όρος πρόσφατων χρόνων block
- Προσαρμογή κάθε block
- Ανταποκρίνεται σε αλλαγές χωρητικότητας

**Υλοποίηση**: `src/consensus/params.h`, λογική δυσκολίας στη δημιουργία block

### Παράμετροι Συστήματος Ανάθεσης

**nForgingAssignmentDelay** (καθυστέρηση ενεργοποίησης):
- Mainnet: `30` blocks (~1 ώρα)
- Testnet: `30` blocks (~1 ώρα)
- Regtest: `4` blocks (~4 δευτερόλεπτα)

**nForgingRevocationDelay** (καθυστέρηση ανάκλησης):
- Mainnet: `720` blocks (~24 ώρες)
- Testnet: `720` blocks (~24 ώρες)
- Regtest: `8` blocks (~8 δευτερόλεπτα)

**Αιτιολόγηση**:
- Η καθυστέρηση ενεργοποίησης αποτρέπει γρήγορη επανανάθεση κατά τη διάρκεια block races
- Η καθυστέρηση ανάκλησης παρέχει σταθερότητα και αποτρέπει κατάχρηση

**Υλοποίηση**: `src/consensus/params.h`

---

## Coinbase και Ανταμοιβές Block

### Πρόγραμμα Επιδότησης Block

**Αρχική Επιδότηση**: `10 BTC` (όλα τα δίκτυα)

**Πρόγραμμα Halving**:
- Κάθε `1050000` blocks (mainnet/testnet)
- Κάθε `500` blocks (regtest)
- Συνεχίζεται για μέγιστα 64 halvings

**Πρόοδος Halving**:
```
Halving 0: 10.00000000 BTC  (blocks 0 - 1049999)
Halving 1:  5.00000000 BTC  (blocks 1050000 - 2099999)
Halving 2:  2.50000000 BTC  (blocks 2100000 - 3149999)
Halving 3:  1.25000000 BTC  (blocks 3150000 - 4199999)
...
```

**Συνολική Προσφορά**: ~21 εκατομμύρια BTC (ίδια με το Bitcoin)

### Κανόνες Εξόδου Coinbase

**Προορισμός Πληρωμής**:
- **Χωρίς Ανάθεση**: Το coinbase πληρώνει τη διεύθυνση plot (proof.account_id)
- **Με Ανάθεση**: Το coinbase πληρώνει τη διεύθυνση σφυρηλάτησης (effective signer)

**Μορφή Εξόδου**: Μόνο P2WPKH
- Το coinbase πρέπει να πληρώνει σε διεύθυνση bech32 SegWit v0
- Δημιουργείται από το δημόσιο κλειδί του effective signer

**Επίλυση Ανάθεσης**:
```cpp
effective_signer = GetEffectiveSigner(plot_address, height, view);
coinbase_script = P2WPKH(effective_signer);
```

**Υλοποίηση**: `src/pocx/mining/scheduler.cpp:ForgeBlock()`

---

## Δυναμική Κλιμάκωση

### Όρια Κλιμάκωσης

**Σκοπός**: Αύξηση δυσκολίας δημιουργίας plot καθώς ωριμάζει το δίκτυο για αποτροπή πληθωρισμού χωρητικότητας

**Δομή**:
```cpp
struct CompressionBounds {
    uint8_t nPoCXMinCompression;     // Ελάχιστο αποδεκτό επίπεδο
    uint8_t nPoCXTargetCompression;  // Συνιστώμενο επίπεδο
};
```

**Σχέση**: `target = min + 1` (πάντα ένα επίπεδο πάνω από το ελάχιστο)

### Πρόγραμμα Αύξησης Κλιμάκωσης

Τα επίπεδα κλιμάκωσης αυξάνονται με **εκθετικό πρόγραμμα** βάσει διαστημάτων halving:

| Χρονική Περίοδος | Ύψος Block | Halvings | Min | Target |
|------------------|------------|----------|-----|--------|
| Έτη 0-4 | 0 έως 1049999 | 0 | X1 | X2 |
| Έτη 4-12 | 1050000 έως 3149999 | 1-2 | X2 | X3 |
| Έτη 12-28 | 3150000 έως 7349999 | 3-6 | X3 | X4 |
| Έτη 28-60 | 7350000 έως 15749999 | 7-14 | X4 | X5 |
| Έτη 60-124 | 15750000 έως 32549999 | 15-30 | X5 | X6 |
| Έτη 124+ | 32550000+ | 31+ | X6 | X7 |

**Βασικά Ύψη** (έτη → halvings → blocks):
- Έτος 4: Halving 1 στο block 1050000
- Έτος 12: Halving 3 στο block 3150000
- Έτος 28: Halving 7 στο block 7350000
- Έτος 60: Halving 15 στο block 15750000
- Έτος 124: Halving 31 στο block 32550000

### Δυσκολία Επιπέδου Κλιμάκωσης

**Κλιμάκωση PoW**:
- Επίπεδο κλιμάκωσης X0: Βασική γραμμή POC2 (θεωρητικό)
- Επίπεδο κλιμάκωσης X1: Βασική γραμμή XOR-transpose
- Επίπεδο κλιμάκωσης Xn: 2^(n-1) × ενσωματωμένη εργασία X1
- Κάθε επίπεδο διπλασιάζει την εργασία δημιουργίας plot

**Οικονομική Ευθυγράμμιση**:
- Οι ανταμοιβές block υποδιπλασιάζονται → η δυσκολία δημιουργίας plot αυξάνεται
- Διατηρεί περιθώριο ασφαλείας: κόστος δημιουργίας plot > κόστος αναζήτησης
- Αποτρέπει τον πληθωρισμό χωρητικότητας από βελτιώσεις υλικού

### Επικύρωση Plot

**Κανόνες Επικύρωσης**:
- Οι υποβληθείσες αποδείξεις πρέπει να έχουν επίπεδο κλιμάκωσης ≥ ελάχιστο
- Αποδείξεις με κλιμάκωση > target γίνονται αποδεκτές αλλά αναποτελεσματικές
- Αποδείξεις κάτω από το ελάχιστο: απορρίπτονται (ανεπαρκές PoW)

**Ανάκτηση Ορίων**:
```cpp
auto bounds = GetPoCXCompressionBounds(height, halving_interval);
```

**Υλοποίηση**: `src/pocx/algorithms/algorithms.h:GetPoCXCompressionBounds()`, `src/pocx/consensus/params.cpp`

---

## Διαμόρφωση Δικτύου

### Seed Nodes και DNS Seeds

**Κατάσταση**: Placeholder για εκκίνηση mainnet

**Προγραμματισμένη Διαμόρφωση**:
- Seed nodes: TBD
- DNS seeds: TBD

**Τρέχουσα Κατάσταση** (testnet/regtest):
- Χωρίς αποκλειστική υποδομή seed
- Υποστηρίζονται χειροκίνητες συνδέσεις peer μέσω `-addnode`

**Υλοποίηση**: `src/kernel/chainparams.cpp`

### Checkpoints

**Checkpoint Genesis**: Πάντα block 0

**Επιπλέον Checkpoints**: Κανένα αυτή τη στιγμή διαμορφωμένο

**Μέλλον**: Τα checkpoints θα προστεθούν καθώς προχωρά το mainnet

---

## Διαμόρφωση Πρωτοκόλλου P2P

### Έκδοση Πρωτοκόλλου

**Βάση**: Πρωτόκολλο Bitcoin Core v30.0
- **Έκδοση Πρωτοκόλλου**: Κληρονομημένη από Bitcoin Core
- **Service Bits**: Τυπικές υπηρεσίες Bitcoin
- **Τύποι Μηνυμάτων**: Τυπικά μηνύματα P2P Bitcoin

**Επεκτάσεις PoCX**:
- Οι κεφαλίδες block περιλαμβάνουν πεδία ειδικά για PoCX
- Τα μηνύματα block περιλαμβάνουν δεδομένα απόδειξης PoCX
- Οι κανόνες επικύρωσης επιβάλλουν τη συναίνεση PoCX

**Συμβατότητα**: Οι κόμβοι PoCX είναι ασύμβατοι με τους κόμβους Bitcoin PoW (διαφορετική συναίνεση)

**Υλοποίηση**: `src/protocol.h`, `src/net_processing.cpp`

---

## Δομή Καταλόγου Δεδομένων

### Προεπιλεγμένος Κατάλογος

**Τοποθεσία**: `.bitcoin/` (ίδια με Bitcoin Core)
- Linux: `~/.bitcoin/`
- macOS: `~/Library/Application Support/Bitcoin/`
- Windows: `%APPDATA%\Bitcoin\`

### Περιεχόμενα Καταλόγου

```
.bitcoin/
├── blocks/              # Δεδομένα block
│   ├── blk*.dat        # Αρχεία block
│   ├── rev*.dat        # Δεδομένα αναίρεσης
│   └── index/          # Ευρετήριο block (LevelDB)
├── chainstate/         # Σύνολο UTXO + αναθέσεις σφυρηλάτησης (LevelDB)
├── wallets/            # Αρχεία πορτοφολιού
│   └── wallet.dat      # Προεπιλεγμένο πορτοφόλι
├── bitcoin.conf        # Αρχείο διαμόρφωσης
├── debug.log           # Log αποσφαλμάτωσης
├── peers.dat           # Διευθύνσεις peer
├── mempool.dat         # Επιμονή mempool
└── banlist.dat         # Αποκλεισμένοι peers
```

### Βασικές Διαφορές από το Bitcoin

**Βάση Δεδομένων Chainstate**:
- Τυπική: Σύνολο UTXO
- **Προσθήκη PoCX**: Κατάσταση ανάθεσης σφυρηλάτησης
- Ατομικές ενημερώσεις: UTXO + αναθέσεις ενημερώνονται μαζί
- Δεδομένα αναίρεσης ασφαλή για reorg για αναθέσεις

**Αρχεία Block**:
- Τυπική μορφή block Bitcoin
- **Προσθήκη PoCX**: Επεκτείνεται με πεδία απόδειξης PoCX (account_id, seed, nonce, signature, pubkey)

### Παράδειγμα Αρχείου Διαμόρφωσης

**bitcoin.conf**:
```ini
# Επιλογή δικτύου
#testnet=1
#regtest=1

# Διακομιστής εξόρυξης PoCX (απαιτείται για εξωτερικούς εξορύκτες)
miningserver=1

# Ρυθμίσεις RPC
server=1
rpcuser=yourusername
rpcpassword=yourpassword
rpcallowip=127.0.0.1
rpcport=8332

# Ρυθμίσεις σύνδεσης
listen=1
port=8888
maxconnections=125

# Στόχος χρόνου block (ενημερωτικό, επιβάλλεται από συναίνεση)
# 120 δευτερόλεπτα για mainnet/testnet
```

---

## Αναφορές Κώδικα

**Chainparams**: `src/kernel/chainparams.cpp`
**Παράμετροι Συναίνεσης**: `src/consensus/params.h`
**Όρια Συμπίεσης**: `src/pocx/algorithms/algorithms.h`, `src/pocx/consensus/params.cpp`
**Υπολογισμός Genesis Base Target**: `src/pocx/consensus/params.cpp`
**Λογική Πληρωμής Coinbase**: `src/pocx/mining/scheduler.cpp:ForgeBlock()`
**Αποθήκευση Κατάστασης Ανάθεσης**: `src/coins.h`, `src/coins.cpp` (επεκτάσεις CCoinsViewCache)

---

## Διασταυρούμενες Αναφορές

Σχετικά κεφάλαια:
- [Κεφάλαιο 2: Μορφή Plot](2-plot-format.md) - Επίπεδα κλιμάκωσης στη δημιουργία plot
- [Κεφάλαιο 3: Συναίνεση και Εξόρυξη](3-consensus-and-mining.md) - Επικύρωση κλιμάκωσης, σύστημα αναθέσεων
- [Κεφάλαιο 4: Αναθέσεις Σφυρηλάτησης](4-forging-assignments.md) - Παράμετροι καθυστέρησης ανάθεσης
- [Κεφάλαιο 5: Ασφάλεια Χρονισμού](5-timing-security.md) - Αιτιολόγηση MAX_FUTURE_BLOCK_TIME

---

[← Προηγούμενο: Χρονικός Συγχρονισμός](5-timing-security.md) | [Πίνακας Περιεχομένων](index.md) | [Επόμενο: Αναφορά RPC →](7-rpc-reference.md)
