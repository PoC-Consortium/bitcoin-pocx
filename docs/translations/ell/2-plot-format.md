[← Προηγούμενο: Εισαγωγή](1-introduction.md) | [Πίνακας Περιεχομένων](index.md) | [Επόμενο: Συναίνεση και Εξόρυξη →](3-consensus-and-mining.md)

---

# Κεφάλαιο 2: Προδιαγραφή Μορφής Plot PoCX

Αυτό το έγγραφο περιγράφει τη μορφή plot PoCX, μια βελτιωμένη έκδοση της μορφής POC2 με βελτιωμένη ασφάλεια, βελτιστοποιήσεις SIMD και κλιμακούμενο proof-of-work.

## Επισκόπηση Μορφής

Τα αρχεία plot PoCX περιέχουν προ-υπολογισμένες τιμές hash Shabal256 οργανωμένες για αποδοτικές λειτουργίες εξόρυξης. Ακολουθώντας την παράδοση PoC από το POC1, **όλα τα μεταδεδομένα είναι ενσωματωμένα στο όνομα αρχείου** - δεν υπάρχει κεφαλίδα αρχείου.

### Επέκταση Αρχείου
- **Τυπική**: `.pocx` (ολοκληρωμένα plots)
- **Σε Εξέλιξη**: `.tmp` (κατά τη διάρκεια του plotting, μετονομάζεται σε `.pocx` όταν ολοκληρωθεί)

## Ιστορικό Πλαίσιο και Εξέλιξη Ευπαθειών

### Μορφή POC1 (Παλαιά)
**Δύο Μεγάλες Ευπάθειες (Time-Memory Tradeoffs):**

1. **Ελάττωμα Κατανομής PoW**
   - Μη-ομοιόμορφη κατανομή του proof-of-work μεταξύ των scoops
   - Τα χαμηλά νούμερα scoop μπορούσαν να υπολογιστούν on-the-fly
   - **Επίπτωση**: Μειωμένες απαιτήσεις αποθήκευσης για επιτιθέμενους

2. **Επίθεση Συμπίεσης XOR** (50% Time-Memory Tradeoff)
   - Εκμετάλλευση μαθηματικών ιδιοτήτων για επίτευξη 50% μείωσης αποθήκευσης
   - **Επίπτωση**: Οι επιτιθέμενοι μπορούσαν να εξορύσσουν με τη μισή απαιτούμενη αποθήκευση

**Βελτιστοποίηση Διάταξης**: Βασική διαδοχική διάταξη scoop για αποδοτικότητα HDD

### Μορφή POC2 (Burstcoin)
- ✅ **Διορθώθηκε το ελάττωμα κατανομής PoW**
- ❌ **Η ευπάθεια XOR-transpose παρέμεινε αδιόρθωτη**
- **Διάταξη**: Διατηρήθηκε η βελτιστοποίηση διαδοχικού scoop

### Μορφή PoCX (Τρέχουσα)
- ✅ **Διορθωμένη κατανομή PoW** (κληρονομήθηκε από POC2)
- ✅ **Διορθωμένη ευπάθεια XOR-transpose** (μοναδική στο PoCX)
- ✅ **Βελτιωμένη διάταξη SIMD/GPU** βελτιστοποιημένη για παράλληλη επεξεργασία και συνένωση μνήμης
- ✅ **Κλιμακούμενο proof-of-work** αποτρέπει time-memory tradeoffs καθώς αυξάνεται η υπολογιστική ισχύς (το PoW εκτελείται μόνο κατά τη δημιουργία ή αναβάθμιση plotfiles)

## Κωδικοποίηση XOR-Transpose

### Το Πρόβλημα: 50% Time-Memory Tradeoff

Στις μορφές POC1/POC2, οι επιτιθέμενοι μπορούσαν να εκμεταλλευτούν τη μαθηματική σχέση μεταξύ των scoops για να αποθηκεύσουν μόνο τα μισά δεδομένα και να υπολογίσουν τα υπόλοιπα on-the-fly κατά την εξόρυξη. Αυτή η "επίθεση συμπίεσης XOR" υπονόμευσε την εγγύηση αποθήκευσης.

### Η Λύση: Σκλήρυνση XOR-Transpose

Το PoCX παράγει τη μορφή εξόρυξής του (X1) εφαρμόζοντας κωδικοποίηση XOR-transpose σε ζεύγη βασικών warps (X0):

**Για την κατασκευή του scoop S του nonce N σε ένα X1 warp:**
1. Λάβετε το scoop S του nonce N από το πρώτο X0 warp (άμεση θέση)
2. Λάβετε το scoop N του nonce S από το δεύτερο X0 warp (μετατεθειμένη θέση)
3. Κάντε XOR τις δύο τιμές 64-byte για να λάβετε το X1 scoop

Το βήμα transpose ανταλλάσσει τους δείκτες scoop και nonce. Σε όρους πίνακα—όπου οι γραμμές αντιπροσωπεύουν scoops και οι στήλες αντιπροσωπεύουν nonces—συνδυάζει το στοιχείο στη θέση (S, N) στο πρώτο warp με το στοιχείο στη (N, S) στο δεύτερο.

### Γιατί Αυτό Εξαλείφει την Επίθεση

Η XOR-transpose διασυνδέει κάθε scoop με μια ολόκληρη γραμμή και μια ολόκληρη στήλη των υποκείμενων δεδομένων X0. Η ανάκτηση ενός μόνο X1 scoop απαιτεί πρόσβαση σε δεδομένα που καλύπτουν όλους τους 4096 δείκτες scoop. Οποιαδήποτε προσπάθεια υπολογισμού ελλειπόντων δεδομένων θα απαιτούσε αναδημιουργία 4096 πλήρων nonces αντί ενός μόνο nonce—αφαιρώντας τη δομή ασύμμετρου κόστους που εκμεταλλεύεται η επίθεση XOR.

Ως αποτέλεσμα, η αποθήκευση του πλήρους X1 warp γίνεται η μόνη υπολογιστικά βιώσιμη στρατηγική για τους εξορύκτες.

## Δομή Μεταδεδομένων Ονόματος Αρχείου

Όλα τα μεταδεδομένα plot κωδικοποιούνται στο όνομα αρχείου χρησιμοποιώντας αυτή την ακριβή μορφή:

```
{ACCOUNT_PAYLOAD}_{SEED}_{WARPS}_{SCALING}.pocx
```

### Στοιχεία Ονόματος Αρχείου

1. **ACCOUNT_PAYLOAD** (40 χαρακτήρες hex)
   - Ακατέργαστο payload λογαριασμού 20-byte ως κεφαλαία hex
   - Ανεξάρτητο δικτύου (χωρίς network ID ή checksum)
   - Παράδειγμα: `DEADBEEFCAFEBABE1337C0DEBADC0FFEE15DEAD`

2. **SEED** (64 χαρακτήρες hex)
   - Τιμή seed 32-byte ως πεζά hex
   - **Νέο στο PoCX**: Τυχαίο seed 32-byte στο όνομα αρχείου αντικαθιστά τη διαδοχική αρίθμηση nonce — αποτρέποντας επικαλύψεις plot
   - Παράδειγμα: `c0ffeebeefcafebabedeadbeef1337c0de42424242feedfacecafed00dabad1dea`

3. **WARPS** (δεκαδικός αριθμός)
   - **ΝΕΑ μονάδα μεγέθους στο PoCX**: Αντικαθιστά τη μέτρηση βάσει nonce από τα POC1/POC2
   - **Ανθεκτικός σχεδιασμός σε XOR-transpose**: Κάθε warp = ακριβώς 4096 nonces (μέγεθος διαμερίσματος που απαιτείται για μετασχηματισμό ανθεκτικό σε XOR-transpose)
   - **Μέγεθος**: 1 warp = 1073741824 bytes = 1 GiB (βολική μονάδα)
   - Παράδειγμα: `1024` (1 TiB plot = 1024 warps)

4. **SCALING** (δεκαδικός με πρόθεμα X)
   - Επίπεδο κλιμάκωσης ως `X{level}`
   - Υψηλότερες τιμές = περισσότερο proof-of-work απαιτείται
   - Παράδειγμα: `X4` (2^4 = 16× δυσκολία POC2)

### Παραδείγματα Ονομάτων Αρχείων
```
DEADBEEFCAFEBABE1337C0DEBADC0FFEE15DEAD_c0ffeebeefcafebabedeadbeef1337c0de42424242feedfacecafed00dabad1dea_1024_X4.pocx
FEEDFACEDEADC0DE123456789ABCDEF012345678_b00b1e5feedc0debabeface5dea1deadc0de1337c0ffeebabeface5bad1dea5_2048_X1.pocx
```


## Διάταξη Αρχείου και Δομή Δεδομένων

### Ιεραρχική Οργάνωση
```
Αρχείο Plot (ΧΩΡΙΣ ΚΕΦΑΛΙΔΑ)
├── Scoop 0
│   ├── Warp 0 (Όλα τα nonces για αυτό το scoop/warp)
│   ├── Warp 1
│   └── ...
├── Scoop 1
│   ├── Warp 0
│   ├── Warp 1
│   └── ...
└── Scoop 4095
    ├── Warp 0
    └── ...
```

### Σταθερές και Μεγέθη

| Σταθερά        | Μέγεθος                    | Περιγραφή                                     |
| -------------- | -------------------------- | --------------------------------------------- |
| **HASH\_SIZE** | 32 B                       | Έξοδος μονού hash Shabal256                   |
| **SCOOP\_SIZE**| 64 B (2 × HASH\_SIZE)      | Ζεύγος hash που διαβάζεται σε έναν γύρο εξόρυξης |
| **NUM\_SCOOPS**| 4096 (2¹²)                 | Scoops ανά nonce· ένα επιλέγεται ανά γύρο     |
| **NONCE\_SIZE**| 262144 B (256 KiB)         | Όλα τα scoops ενός nonce (μικρότερη μονάδα PoC1/PoC2) |
| **WARP\_SIZE** | 1073741824 B (1 GiB)       | Μικρότερη μονάδα στο PoCX                     |

### Διάταξη Αρχείου Plot Βελτιστοποιημένη για SIMD

Το PoCX υλοποιεί ένα μοτίβο πρόσβασης nonce με επίγνωση SIMD που επιτρέπει διανυσματική επεξεργασία
πολλαπλών nonces ταυτόχρονα. Βασίζεται σε έννοιες από [έρευνα βελτιστοποίησης
POC2×16](https://www.reddit.com/r/burstcoin/comments/a1qyoq/cip_announcement_poc2x16_a_new_optimized_plot/) για μεγιστοποίηση της διεκπεραιωτικότητας μνήμης και της αποδοτικότητας SIMD.

---

#### Παραδοσιακή Διαδοχική Διάταξη

Διαδοχική αποθήκευση nonces:

```
[Nonce 0: Scoop Data] [Nonce 1: Scoop Data] [Nonce 2: Scoop Data] ...
```

Αναποτελεσματικότητα SIMD: Κάθε λωρίδα SIMD χρειάζεται την ίδια λέξη μεταξύ nonces:

```
Word 0 από Nonce 0 -> offset 0
Word 0 από Nonce 1 -> offset 512
Word 0 από Nonce 2 -> offset 1024
...
```

Η πρόσβαση scatter-gather μειώνει τη διεκπεραιωτικότητα.

---

#### Διάταξη PoCX Βελτιστοποιημένη για SIMD

Το PoCX αποθηκεύει **θέσεις λέξεων μεταξύ 16 nonces** συνεχόμενα:

```
Cache Line (64 bytes):

Word0_N0 Word0_N1 Word0_N2 ... Word0_N15
Word1_N0 Word1_N1 Word1_N2 ... Word1_N15
...
```

**Διάγραμμα ASCII**

```
Παραδοσιακή διάταξη:

Nonce0: [W0][W1][W2][W3]...
Nonce1: [W0][W1][W2][W3]...
Nonce2: [W0][W1][W2][W3]...

Διάταξη PoCX:

Word0: [N0][N1][N2][N3]...[N15]
Word1: [N0][N1][N2][N3]...[N15]
Word2: [N0][N1][N2][N3]...[N15]
```

---

#### Οφέλη Πρόσβασης Μνήμης

- Μία cache line παρέχει όλες τις λωρίδες SIMD.
- Εξαλείφονται οι λειτουργίες scatter-gather.
- Μειώνονται τα cache misses.
- Πλήρως διαδοχική πρόσβαση μνήμης για διανυσματικό υπολογισμό.
- Οι GPUs επίσης επωφελούνται από την ευθυγράμμιση 16-nonce, μεγιστοποιώντας την αποδοτικότητα cache.

---

#### Κλιμάκωση SIMD

| SIMD       | Πλάτος Διανύσματος* | Nonces | Κύκλοι Επεξεργασίας ανά Cache Line |
|------------|---------------------|--------|------------------------------------|
| SSE2/AVX   | 128-bit             | 4      | 4 κύκλοι                           |
| AVX2       | 256-bit             | 8      | 2 κύκλοι                           |
| AVX512     | 512-bit             | 16     | 1 κύκλος                           |

\* Για ακέραιες λειτουργίες

---



## Κλιμάκωση Proof-of-Work

### Επίπεδα Κλιμάκωσης
- **X0**: Βασικά nonces χωρίς κωδικοποίηση XOR-transpose (θεωρητικό, δεν χρησιμοποιείται για εξόρυξη)
- **X1**: Βασική γραμμή XOR-transpose—πρώτη σκληρυμένη μορφή (1× εργασία)
- **X2**: 2× εργασία X1 (XOR μεταξύ 2 warps)
- **X3**: 4× εργασία X1 (XOR μεταξύ 4 warps)
- **…**
- **Xn**: 2^(n-1) × ενσωματωμένη εργασία X1

### Οφέλη
- **Ρυθμιζόμενη δυσκολία PoW**: Αυξάνει τις υπολογιστικές απαιτήσεις για να συμβαδίσει με ταχύτερο υλικό
- **Μακροβιότητα μορφής**: Επιτρέπει ευέλικτη κλιμάκωση της δυσκολίας εξόρυξης με την πάροδο του χρόνου

### Αναβάθμιση Plot / Συμβατότητα προς τα Πίσω

Όταν το δίκτυο αυξάνει την κλίμακα PoW (Proof of Work) κατά 1, τα υπάρχοντα plots απαιτούν αναβάθμιση για να διατηρήσουν το ίδιο ενεργό μέγεθος plot. Ουσιαστικά, χρειάζεστε τώρα διπλάσιο PoW στα αρχεία plot σας για να επιτύχετε την ίδια συνεισφορά στον λογαριασμό σας.

Τα καλά νέα είναι ότι το PoW που έχετε ήδη ολοκληρώσει κατά τη δημιουργία των αρχείων plot σας δεν χάνεται—απλά πρέπει να προσθέσετε επιπλέον PoW στα υπάρχοντα αρχεία. Δεν χρειάζεται επαναδημιουργία plot.

Εναλλακτικά, μπορείτε να συνεχίσετε να χρησιμοποιείτε τα τρέχοντα plots χωρίς αναβάθμιση, αλλά σημειώστε ότι θα συνεισφέρουν τώρα μόνο το 50% του προηγούμενου ενεργού μεγέθους τους προς τον λογαριασμό σας. Το λογισμικό εξόρυξης μπορεί να κλιμακώσει ένα plotfile on-the-fly.

## Σύγκριση με Παλαιές Μορφές

| Χαρακτηριστικό | POC1 | POC2 | PoCX |
|----------------|------|------|------|
| Κατανομή PoW | ❌ Ελαττωματική | ✅ Διορθωμένη | ✅ Διορθωμένη |
| Αντοχή σε XOR-Transpose | ❌ Ευάλωτη | ❌ Ευάλωτη | ✅ Διορθωμένη |
| Βελτιστοποίηση SIMD | ❌ Καμία | ❌ Καμία | ✅ Προηγμένη |
| Βελτιστοποίηση GPU | ❌ Καμία | ❌ Καμία | ✅ Βελτιστοποιημένη |
| Κλιμακούμενο Proof-of-Work | ❌ Κανένα | ❌ Κανένα | ✅ Ναι |
| Υποστήριξη Seed | ❌ Καμία | ❌ Καμία | ✅ Ναι |

Η μορφή PoCX αντιπροσωπεύει την τρέχουσα τελευταία λέξη της τεχνολογίας στις μορφές plot Proof of Capacity, αντιμετωπίζοντας όλες τις γνωστές ευπάθειες ενώ παρέχει σημαντικές βελτιώσεις απόδοσης για σύγχρονο υλικό.

## Αναφορές και Περαιτέρω Ανάγνωση

- **Υπόβαθρο POC1/POC2**: [Επισκόπηση Εξόρυξης Burstcoin](https://www.burstcoin.community/burstcoin-mining/) - Ολοκληρωμένος οδηγός για παραδοσιακές μορφές εξόρυξης Proof of Capacity
- **Έρευνα POC2×16**: [Ανακοίνωση CIP: POC2×16 - Μια νέα βελτιστοποιημένη μορφή plot](https://www.reddit.com/r/burstcoin/comments/a1qyoq/cip_announcement_poc2x16_a_new_optimized_plot/) - Πρωτότυπη έρευνα βελτιστοποίησης SIMD που ενέπνευσε το PoCX
- **Αλγόριθμος Hash Shabal**: [Το Έργο Saphir: Shabal, Υποβολή στον Διαγωνισμό Κρυπτογραφικών Αλγορίθμων Hash του NIST](https://www.cs.rit.edu/~ark/20090927/Round2Candidates/Shabal.pdf) - Τεχνική προδιαγραφή του αλγορίθμου Shabal256 που χρησιμοποιείται στην εξόρυξη PoC

---

[← Προηγούμενο: Εισαγωγή](1-introduction.md) | [Πίνακας Περιεχομένων](index.md) | [Επόμενο: Συναίνεση και Εξόρυξη →](3-consensus-and-mining.md)
