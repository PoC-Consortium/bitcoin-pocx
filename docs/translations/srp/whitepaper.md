# Bitcoin-PoCX: Енергетски ефикасан консензус за Bitcoin Core

**Верзија**: 2.0 нацрт
**Датум**: Децембар 2025
**Организација**: Proof of Capacity Consortium

---

## Сажетак

Bitcoin-ов Proof-of-Work (PoW) консензус обезбеђује робусну безбедност али троши значајну енергију због континуираног рачунања хешева у реалном времену. Представљамо Bitcoin-PoCX, Bitcoin форк који замењује PoW са Proof of Capacity (PoC), где рудари претпретрачунавају и складиште велике скупове хешева ускладиштених на диску током плотовања и накнадно рударе извођењем лаганих претраживања уместо текућег хеширања. Пребацивањем рачунања из фазе рударења у једнократну фазу плотовања, Bitcoin-PoCX драстично смањује потрошњу енергије док омогућава рударење на масовном хардверу, смањујући баријеру за учешће и ублажавајући притиске централизације инхерентне у PoW који доминирају ASIC-и, све док чува Bitcoin-ове безбедносне претпоставке и економско понашање.

Наша имплементација уводи неколико кључних иновација:
(1) Ојачани формат плота који елиминише све познате нападе компромиса времена и меморије у постојећим PoC системима, обезбеђујући да ефективна снага рударења остаје стриктно пропорционална посвећеном капацитету складиштења;
(2) Алгоритам савијања времена, који трансформише дистрибуције рокова од експоненцијалне до хи-квадрат, смањујући варијансу времена блока без мењања просека;
(3) Механизам додељивања ковања заснован на OP_RETURN који омогућава рударење у пулу без кустодијалства; и
(4) Динамичко скалирање компресије, које повећава тежину генерисања плота у складу са распоредима преполовљавања да одржи дугорочне сигурносне маргине како се хардвер побољшава.

Bitcoin-PoCX одржава архитектуру Bitcoin Core кроз минималне, означене модификације, изолујући PoC логику од постојећег кода консензуса. Систем чува Bitcoin-ову монетарну политику циљајући 120-секундни интервал блока и подешавајући субвенцију блока на 10 BTC. Смањена субвенција компензује петоструко повећање фреквенције блокова, одржавајући дугорочну стопу издавања усклађеном са Bitcoin-овим оригиналним распоредом и одржавајући максималну понуду од ~21 милион.

---

## 1. Увод

### 1.1 Мотивација

Bitcoin-ов Proof-of-Work (PoW) консензус се показао безбедним током више од деценије, али уз значајан трошак: рудари морају континуирано трошити рачунарске ресурсе, што резултира високом потрошњом енергије. Поред забринутости за ефикасност, постоји шира мотивација: истраживање алтернативних механизама консензуса који одржавају безбедност док смањују баријеру за учешће. PoC омогућава практично свакоме са масовним хардвером за складиштење да ефикасно рудари, смањујући притиске централизације који се виде у PoW рударењу које доминирају ASIC-и.

Proof of Capacity (PoC) постиже ово изводећи снагу рударења из посвећености складиштења уместо текућег рачунања. Рудари претпретрачунавају велике скупове хешева ускладиштених на диску — плотове — током једнократне фазе плотовања. Рударење се затим састоји од лаганих претраживања, драстично смањујући потрошњу енергије док чува безбедносне претпоставке консензуса заснованог на ресурсима.

### 1.2 Интеграција са Bitcoin Core

Bitcoin-PoCX интегрише PoC консензус у Bitcoin Core уместо креирања новог блокчејна. Овај приступ користи Bitcoin Core-ову доказану безбедност, зрелу мрежну структуру и широко усвојене алате, док одржава модификације минималним и означеним. PoC логика је изолована од постојећег кода консензуса, обезбеђујући да основна функционалност — валидација блокова, операције новчаника, формати трансакција — остаје углавном непромењена.

### 1.3 Циљеви дизајна

**Безбедност**: Задржати робусност еквивалентну Bitcoin-у; напади захтевају већински капацитет складиштења.

**Ефикасност**: Смањити текуће рачунарско оптерећење на нивое I/O диска.

**Приступачност**: Омогућити рударење са масовним хардвером, смањујући баријере за улазак.

**Минимална интеграција**: Увести PoC консензус са минималним отиском модификација.

---

## 2. Позадина: Proof of Capacity

### 2.1 Историја

Proof of Capacity (PoC) је представио Burstcoin 2014. године као енергетски ефикасну алтернативу Proof-of-Work (PoW). Burstcoin је демонстрирао да се снага рударења може извести из посвећеног складиштења уместо континуираног хеширања у реалном времену: рудари су претпретрачунавали велике скупове података („плотове") једном и затим рударили читањем малих, фиксних делова истих.

Ране PoC имплементације су доказале да је концепт изводљив али су такође открили да су формат плота и криптографска структура критични за безбедност. Неколико компромиса времена и меморије је дозволило нападачима да рударе ефикасно са мање складиштења од поштених учесника. Ово је истакло да безбедност PoC зависи од дизајна плота — не само од коришћења складиштења као ресурса.

Burstcoin-ово наслеђе је успоставило PoC као практичан механизам консензуса и обезбедило темељ на којем PoCX гради.

### 2.2 Основни концепти

PoC рударење је засновано на великим, претпретрачунатим плот датотекама ускладиштеним на диску. Ови плотови садрже „замрзнуто рачунање": скупо хеширање се изводи једном током плотовања, а рударење се затим састоји од лаганих читања са диска и једноставне верификације. Основни елементи укључују:

**Nonce:**
Основна јединица података плота. Сваки nonce садржи 4096 scoop-ова (укупно 256 KiB) генерисаних путем Shabal256 из адресе рудара и индекса nonce-а.

**Scoop:**
64-бајтни сегмент унутар nonce-а. За сваки блок, мрежа детерминистички бира индекс scoop-а (0–4095) на основу генерацијског потписа претходног блока. Само овај scoop по nonce-у мора бити прочитан.

**Генерацијски потпис:**
256-битна вредност изведена из претходног блока. Обезбеђује ентропију за селекцију scoop-а и спречава рударе да предвиде будуће индексе scoop-ова.

**Warp:**
Структурна група од 4096 nonce-ова (1 GiB). Warp-ови су релевантна јединица за формате плотова отпорне на компресију.

### 2.3 Процес рударења и ланац квалитета

PoC рударење се састоји од једнократног корака плотовања и лагане рутине по блоку:

**Једнократно подешавање:**
- Генерисање плота: Израчунај nonce-ове путем Shabal256 и упиши их на диск.

**Рударење по блоку:**
- Селекција scoop-а: Одреди индекс scoop-а из генерацијског потписа.
- Скенирање плота: Прочитај тај scoop из свих nonce-ова у плотовима рудара.

**Ланац квалитета:**
- Сирови квалитет: Хеширај сваки scoop са генерацијским потписом користећи Shabal256Lite да добијеш 64-битну вредност квалитета (нижа је боља).
- Рок: Конвертуј квалитет у рок користећи базни циљ (параметар подешен тежином који обезбеђује да мрежа достигне свој циљани интервал блока): `deadline = quality / base_target`
- Савијени рок: Примени трансформацију савијања времена да смањиш варијансу док чуваш очекивано време блока.

**Ковање блока:**
Рудар са најкраћим (савијеним) роком кује следећи блок када то време истекне.

За разлику од PoW, скоро сво рачунање се дешава током плотовања; активно рударење је примарно ограничено диском и троши веома мало енергије.

### 2.4 Познате рањивости у претходним системима

**POC1 мана дистрибуције:**
Оригинални Burstcoin POC1 формат је показао структурну пристрасност: scoop-ови са ниским индексима су били значајно јефтинији за прерачунавање у лету од scoop-ова са високим индексима. Ово је увело неуниформан компромис времена и меморије, дозвољавајући нападачима да смање потребно складиштење за те scoop-ове и кршећи претпоставку да су сви претпретрачунати подаци подједнако скупи.

**XOR напад компресије (POC2):**
У POC2, нападач може узети било који скуп од 8192 nonce-а и поделити их у два блока од 4096 nonce-ова (A и B). Уместо складиштења оба блока, нападач складишти само изведену структуру: `A ⊕ transpose(B)`, где транспозиција замењује индексе scoop-а и nonce-а — scoop S nonce-а N у блоку B постаје scoop N nonce-а S.

Током рударења, када је scoop S nonce-а N потребан, нападач реконструише га:
1. Читајући ускладиштену XOR вредност на позицији (S, N)
2. Рачунајући nonce N из блока A да добије scoop S
3. Рачунајући nonce S из блока B да добије транспонован scoop N
4. XOR-ујући све три вредности да поврати оригинални 64-бајтни scoop

Ово смањује складиштење за 50%, док захтева само два рачунања nonce-а по претраживању — трошак далеко испод прага потребног да се примени потпуно претпретрачунавање. Напад је изводљив јер је рачунање реда (један nonce, 4096 scoop-ова) јефтино, док би рачунање колоне (један scoop преко 4096 nonce-ова) захтевало регенерисање свих nonce-ова. Структура транспозиције излаже ову неравнотежу.

Ово је демонстрирало потребу за форматом плота који спречава такву структурирану рекомбинацију и уклања основни компромис времена и меморије. Одељак 3.3 описује како PoCX адресира и решава ову слабост.

### 2.5 Прелаз на PoCX

Ограничења ранијих PoC система су јасно показала да безбедно, фер и децентрализовано рударење складиштења зависи од пажљиво инжењерисаних структура плотова. Bitcoin-PoCX адресира ове проблеме са ојачаним форматом плота, побољшаном дистрибуцијом рокова и механизмима за децентрализовано рударење у пулу — описаним у следећем одељку.

---

## 3. PoCX формат плота

### 3.1 Конструкција базног nonce-а

Nonce је структура података од 256 KiB изведена детерминистички из три параметра: 20-бајтног payload-а адресе, 32-бајтног seed-а и 64-битног индекса nonce-а.

Конструкција почиње комбиновањем ових улаза и хеширањем са Shabal256 да произведе иницијални хеш. Овај хеш служи као почетна тачка за итеративни процес експанзије: Shabal256 се примењује понављано, са сваким кораком који зависи од претходно генерисаних података, док се цео 256 KiB бафер не попуни. Овај уланчани процес представља рачунарски рад изведен током плотовања.

Финални корак дифузије хешира завршени бафер и XOR-ује резултат преко свих бајтова. Ово обезбеђује да је цео бафер израчунат и да рудари не могу скратити израчунавање. POC2 shuffle се затим примењује, замењујући доње и горње половине сваког scoop-а да гарантује да сви scoop-ови захтевају еквивалентан рачунарски напор.

Финални nonce се састоји од 4096 scoop-ова од 64 бајта сваки и формира фундаменталну јединицу која се користи у рударењу.

### 3.2 SIMD-поравнат распоред плота

Да би максимизирао пропусност на модерном хардверу, PoCX организује податке nonce-ова на диску да олакша векторизовану обраду. Уместо складиштења сваког nonce-а секвенцијално, PoCX поравнава одговарајуће 4-бајтне речи преко више узастопних nonce-ова континуално. Ово дозвољава једном преузимању из меморије да обезбеди податке за све SIMD траке, минимизирајући cache промашаје и елиминишући scatter-gather overhead.

```
Традиционални распоред:
Nonce0: [W0][W1][W2][W3]...
Nonce1: [W0][W1][W2][W3]...
Nonce2: [W0][W1][W2][W3]...

PoCX SIMD распоред:
Word0: [N0][N1][N2]...[N15]
Word1: [N0][N1][N2]...[N15]
Word2: [N0][N1][N2]...[N15]
```

Овај распоред користи и CPU и GPU рударима, омогућавајући високо-пропусну, паралелизовану евалуацију scoop-ова док задржава једноставан скаларни образац приступа за верификацију консензуса. Обезбеђује да је рударење ограничено пропусношћу складиштења уместо CPU рачунањем, одржавајући нископотрошну природу Proof of Capacity.

### 3.3 Warp структура и XOR-Transpose кодирање

Warp је фундаментална јединица складиштења у PoCX, која се састоји од 4096 nonce-ова (1 GiB). Некомпресовани формат, означен као X0, садржи базне nonce-ове тачно како их производи конструкција у Одељку 3.1.

**XOR-Transpose кодирање (X1)**

Да би уклонио структурне компромисе времена и меморије присутне у ранијим PoC системима, PoCX изводи ојачани формат за рударење, X1, применом XOR-transpose кодирања на парове X0 warp-ова.

За конструкцију scoop-а S nonce-а N у X1 warp-у:

1. Узми scoop S nonce-а N из првог X0 warp-а (директна позиција)
2. Узми scoop N nonce-а S из другог X0 warp-а (транспонована позиција)
3. XOR две 64-бајтне вредности да добијеш X1 scoop

Корак транспозиције замењује индексе scoop-а и nonce-а. У матричним терминима — где редови представљају scoop-ове а колоне nonce-ове — комбинује елемент на позицији (S, N) у првом warp-у са елементом на (N, S) у другом.

**Зашто ово елиминише површину напада компресије**

XOR-transpose повезује сваки scoop са целим редом и целом колоном основних X0 података. Враћање једног X1 scoop-а стога захтева приступ подацима који обухватају свих 4096 индекса scoop-ова. Сваки покушај рачунања података који недостају захтевао би регенерисање 4096 комплетних nonce-ова, уместо једног nonce-а — уклањајући асиметричну структуру трошкова коју експлоатише XOR напад за POC2 (Одељак 2.4).

Као резултат, складиштење комплетног X1 warp-а постаје једина рачунарски одржива стратегија за рударе, затварајући компромис времена и меморије експлоатисан у претходним дизајнима.

### 3.4 Распоред на диску

PoCX плот датотеке се састоје од много узастопних X1 warp-ова. Да би максимизирао оперативну ефикасност током рударења, подаци унутар сваке датотеке су организовани по scoop-у: сви подаци scoop-а 0 из сваког warp-а се складиште секвенцијално, затим сви подаци scoop-а 1, итд., до scoop-а 4095.

Ово **секвенцијално уређење по scoop-у** дозвољава рударима да прочитају комплетне податке потребне за изабрани scoop у једном секвенцијалном приступу диску, минимизирајући времена претраживања и максимизирајући пропусност на масовним уређајима за складиштење.

Комбиновано са XOR-transpose кодирањем Одељка 3.3, овај распоред обезбеђује да је датотека и **структурно ојачана** и **оперативно ефикасна**: секвенцијално уређење scoop-ова подржава оптималан I/O диска, док SIMD-поравнати меморијски распореди (видети Одељак 3.2) дозвољавају високо-пропусну, паралелизовану евалуацију scoop-ова.

### 3.5 Скалирање доказа рада (Xn)

PoCX имплементира скалабилно претпретрачунавање кроз концепт нивоа скалирања, означених Xn, да би се прилагодио еволуирајућим перформансама хардвера. Основни X1 формат представља прву XOR-transpose ојачану warp структуру.

Сваки ниво скалирања Xn повећава доказ рада уграђен у сваки warp експоненцијално у односу на X1: рад потребан на нивоу Xn је 2^(n-1) пута већи од X1. Прелазак са Xn на Xn+1 је оперативно еквивалентан примени XOR преко парова суседних warp-ова, постепено уграђујући више доказа рада без промене основне величине плота.

Постојеће плот датотеке креиране на нижим нивоима скалирања се и даље могу користити за рударење, али доприносе пропорционално мање рада ка генерисању блокова, одражавајући њихов нижи уграђени доказ рада. Овај механизам обезбеђује да PoCX плотови остају безбедни, флексибилни и економски уравнотежени током времена.

### 3.6 Функционалност seed-а

Параметар seed-а омогућава више плотова који се не преклапају по адреси без ручне координације.

**Проблем (POC2)**: Рудари су морали ручно пратити опсеге nonce-ова преко плот датотека да избегну преклапање. Преклапајући nonce-ови троше складиштење без повећања снаге рударења.

**Решење**: Сваки пар `(address, seed)` дефинише независан простор кључева. Плотови са различитим seed-овима се никада не преклапају, без обзира на опсеге nonce-ова. Рудари могу слободно креирати плотове без координације.

---

## 4. Proof of Capacity консензус

PoCX проширује Bitcoin-ов Nakamoto консензус механизмом доказа заснованим на складиштењу. Уместо трошења енергије на поновљено хеширање, рудари посвећују велике количине претпретрачунатих података — плотова — диску. Током генерисања блока, морају лоцирати мали, непредвидљиви део ових података и трансформисати га у доказ. Рудар који обезбеди најбољи доказ унутар очекиваног временског прозора зарађује право да искује следећи блок.

Ово поглавље описује како PoCX структурира метаподатке блока, изводи непредвидљивост и трансформише статичко складиштење у безбедан механизам консензуса са ниском варијансом.

### 4.1 Структура блока

PoCX задржава познато заглавље блока у стилу Bitcoin-а али уводи додатна поља консензуса потребна за рударење засновано на капацитету. Ова поља колективно везују блок за ускладиштени плот рудара, тежину мреже и криптографску ентропију која дефинише сваки изазов рударења.

На високом нивоу, PoCX блок садржи: висину блока, записану експлицитно да поједностави контекстуалну валидацију; генерацијски потпис, извор свеже ентропије који повезује сваки блок са његовим претходником; базни циљ, који представља тежину мреже у инверзном облику (више вредности одговарају лакшем рударењу); PoCX доказ, који идентификује плот рудара, ниво компресије коришћен током плотовања, изабрани nonce и квалитет изведен из њега; и потписни кључ и потпис, који доказују контролу над капацитетом коришћеним за ковање блока (или над додељеним кључем ковања).

Доказ уграђује све информације релевантне за консензус потребне валидаторима да прерачунају изазов, верификују изабрани scoop и потврде резултујући квалитет. Проширивањем уместо редизајнирања структуре блока, PoCX остаје концептуално усклађен са Bitcoin-ом док омогућава фундаментално другачији извор рада рударења.

### 4.2 Ланац генерацијских потписа

Генерацијски потпис обезбеђује непредвидљивост потребну за безбедно Proof of Capacity рударење. Сваки блок изводи свој генерацијски потпис из потписа и потписника претходног блока, обезбеђујући да рудари не могу антиципирати будуће изазове или претпретрачунати повољне регионе плота:

`generationSignature[n] = SHA256(generationSignature[n-1] || miner_pubkey[n-1])`

Ово производи секвенцу криптографски јаких, од рудара зависних вредности ентропије. Пошто је јавни кључ рудара непознат док се претходни блок не објави, ниједан учесник не може предвидети будуће селекције scoop-ова. Ово спречава селективно претпретрачунавање или стратешко плотовање и обезбеђује да сваки блок уводи истински свеж рад рударења.

### 4.3 Процес ковања

Рударење у PoCX се састоји од трансформисања ускладиштених података у доказ вођен искључиво генерацијским потписом. Иако је процес детерминистички, непредвидљивост потписа обезбеђује да рудари не могу унапред припремити и морају понављано приступати својим ускладиштеним плотовима.

**Извођење изазова (селекција scoop-а):** Рудар хешира тренутни генерацијски потпис са висином блока да добије индекс scoop-а у опсегу 0–4095. Овај индекс одређује који 64-бајтни сегмент сваког ускладиштеног nonce-а учествује у доказу. Пошто генерацијски потпис зависи од потписника претходног блока, селекција scoop-а постаје позната тек у тренутку објављивања блока.

**Евалуација доказа (израчунавање квалитета):** За сваки nonce у плоту, рудар преузима изабрани scoop и хешира га заједно са генерацијским потписом да добије квалитет — 64-битну вредност чија величина одређује конкурентност рудара. Нижи квалитет одговара бољем доказу.

**Формирање рока (савијање времена):** Сирови рок је пропорционалан квалитету и обрнуто пропорционалан базном циљу. У legacy PoC дизајнима, ови рокови су пратили веома искривљену експоненцијалну дистрибуцију, производећи дуга кашњења у репу која нису пружала додатну безбедност. PoCX трансформише сирови рок користећи савијање времена (Одељак 4.4), смањујући варијансу и обезбеђујући предвидљиве интервале блокова. Када савијени рок истекне, рудар кује блок уграђивањем доказа и потписивањем ефективним кључем ковања.

### 4.4 Савијање времена

Proof of Capacity производи експоненцијално дистрибуиране рокове. Након кратког периода — типично неколико десетина секунди — сваки рудар је већ идентификовао свој најбољи доказ, и свако додатно време чекања доприноси само латенцији, не безбедности.

Савијање времена преобликује дистрибуцију применом трансформације кубног корена:

`deadline_bended = scale × (quality / base_target)^(1/3)`

Фактор скалирања чува очекивано време блока (120 секунди) док драматично смањује варијансу. Кратки рокови се проширују, побољшавајући ширење блокова и безбедност мреже. Дуги рокови се компресују, спречавајући аутлајере од одлагања ланца.

![Дистрибуције времена блока](blocktime_distributions.svg)

Савијање времена одржава информациони садржај основног доказа. Не модификује конкурентност међу рударима; само прераспоређује време чекања да произведе глаткије, предвидљивије интервале блокова. Имплементација користи аритметику са фиксном тачком (Q42 формат) и 256-битне целе бројеве да обезбеди детерминистичке резултате на свим платформама.

### 4.5 Подешавање тежине

PoCX регулише производњу блокова користећи базни циљ, инверзну меру тежине. Очекивано време блока је пропорционално односу `quality / base_target`, тако да повећање базног циља убрзава креирање блокова док га смањење успорава.

Тежина се подешава сваким блоком користећи измерено време између недавних блокова у поређењу са циљаним интервалом. Ово често подешавање је неопходно јер се капацитет складиштења може брзо додати или уклонити — за разлику од Bitcoin-ове hashpower-а, који се мења спорије.

Подешавање прати два руководећа ограничења: **Постепеност** — промене по блоку су ограничене (максимум ±20%) да избегну осцилације или манипулацију; **Ојачање** — базни циљ не може прећи своју genesis вредност, спречавајући мрежу да икада спусти тежину испод оригиналних безбедносних претпоставки.

### 4.6 Валидност блока

Блок у PoCX је важећи када представља верификабилан доказ изведен из складиштења конзистентан са стањем консензуса. Валидатори независно прерачунавају селекцију scoop-а, изводе очекивани квалитет из послатог nonce-а и метаподатака плота, примењују трансформацију савијања времена и потврђују да је рудар био подобан да искује блок у декларисано време.

Конкретно, важећи блок захтева: да је рок истекао од родитељског блока; да послати квалитет одговара израчунатом квалитету за доказ; да ниво скалирања задовољава минимум мреже; да генерацијски потпис одговара очекиваној вредности; да базни циљ одговара очекиваној вредности; да потпис блока долази од ефективног потписника; и да coinbase плаћа на адресу ефективног потписника.

---

## 5. Додељивања ковања

### 5.1 Мотивација

Додељивања ковања дозвољавају власницима плотова да делегирају ауторитет ковања блокова без икада уступања власништва над својим плотовима. Овај механизам омогућава рударење у пулу и конфигурације хладног складиштења док чува безбедносне гаранције PoCX.

У рударењу у пулу, власници плотова могу овластити пул да кује блокове у њихово име. Пул саставља блокове и дистрибуира награде, али никада не добија кустодијалство над самим плотовима. Делегирање је реверзибилно у било ком тренутку, и власници плотова остају слободни да напусте пул или промене конфигурације без поновног плотовања.

Додељивања такође подржавају чисто раздвајање између хладних и врућих кључева. Приватни кључ који контролише плот може остати офлајн, док одвојени кључ ковања — ускладиштен на онлајн машини — производи блокове. Компромитовање кључа ковања стога компромитује само ауторитет ковања, не власништво. Плот остаје безбедан и додељивање се може опозвати, затварајући безбедносну рупу одмах.

Додељивања ковања стога обезбеђују оперативну флексибилност док одржавају принцип да контрола над ускладиштеним капацитетом никада не сме бити пренета посредницима.

### 5.2 Протокол додељивања

Додељивања се декларишу кроз OP_RETURN трансакције да избегну непотребан раст UTXO скупа. Трансакција додељивања наводи адресу плота и адресу ковања која је овлашћена да производи блокове користећи капацитет тог плота. Трансакција опозива садржи само адресу плота. У оба случаја, власник плота доказује контролу потписивањем улаза за трошење трансакције.

Свако додељивање пролази кроз секвенцу добро дефинисаних стања (UNASSIGNED, ASSIGNING, ASSIGNED, REVOKING, REVOKED). Након што се трансакција додељивања потврди, систем улази у кратку фазу активације. Ово кашњење — 30 блокова, отприлике један сат — обезбеђује стабилност током трка блокова и спречава непријатељско брзо мењање идентитета ковања. Када овај период активације истекне, додељивање постаје активно и остаје тако док власник плота не изда опозив.

Опозиви прелазе у дужи период кашњења од 720 блокова, приближно један дан. Током овог времена, претходна адреса ковања остаје активна. Ово дуже кашњење обезбеђује оперативну стабилност за пулове, спречавајући стратешко „скакање додељивања" и дајући провајдерима инфраструктуре довољно сигурности да ефикасно раде. Након што кашњење опозива истекне, опозив се завршава и власник плота је слободан да одреди нови кључ ковања.

Стање додељивања се одржава у структури слоја консензуса паралелно са UTXO скупом и подржава податке за поништавање за безбедно руковање реорганизацијама ланца.

### 5.3 Правила валидације

За сваки блок, валидатори одређују ефективног потписника — адресу која мора потписати блок и примити coinbase награду. Овај потписник зависи искључиво од стања додељивања на висини блока.

Ако додељивање не постоји или није завршило своју фазу активације, власник плота остаје ефективни потписник. Када додељивање постане активно, додељена адреса ковања мора потписати. Током опозива, адреса ковања наставља да потписује док кашњење опозива не истекне. Тек тада се ауторитет враћа власнику плота.

Валидатори примењују да потпис блока долази од ефективног потписника, да coinbase плаћа на исту адресу и да сви прелази прате прописана кашњења активације и опозива. Само власник плота може креирати или опозивати додељивања; кључеви ковања не могу модификовати или проширити своје дозволе.

Додељивања ковања стога уводе флексибилну делегацију без увођења поверења. Власништво над основним капацитетом увек остаје криптографски усидрено на власника плота, док се ауторитет ковања може делегирати, ротирати или опозвати како се оперативне потребе развијају.

---

## 6. Динамичко скалирање

Како се хардвер развија, трошак рачунања плотова се смањује у односу на читање претпретрачунатог рада са диска. Без противмера, нападачи би на крају могли генерисати доказе у лету брже него што рудари читају ускладиштени рад, подривајући безбедносни модел Proof of Capacity.

Да би очувао намењену сигурносну маргину, PoCX имплементира распоред скалирања: минимални потребни ниво скалирања за плотове се повећава током времена. Сваки ниво скалирања Xn, како је описано у Одељку 3.5, уграђује експоненцијално више доказа рада унутар структуре плота, обезбеђујући да рудари наставе да посвећују значајне ресурсе складиштења чак и како рачунање постаје јефтиније.

Распоред се усклађује са економским подстицајима мреже, посебно преполовљавањима награда блокова. Како се награда по блоку смањује, минимални ниво се постепено повећава, чувајући равнотежу између напора плотовања и потенцијала рударења:

| Период | Године | Преполовљавања | Min скалирање | Мултипликатор рада плота |
|--------|--------|----------------|---------------|--------------------------|
| Епоха 0 | 0-4 | 0 | X1 | 2× основа |
| Епоха 1 | 4-12 | 1-2 | X2 | 4× основа |
| Епоха 2 | 12-28 | 3-6 | X3 | 8× основа |
| Епоха 3 | 28-60 | 7-14 | X4 | 16× основа |
| Епоха 4 | 60-124 | 15-30 | X5 | 32× основа |
| Епоха 5 | 124+ | 31+ | X6 | 64× основа |

Рудари опционо могу припремити плотове који превазилазе тренутни минимум за један ниво, дозвољавајући им да планирају унапред и избегну тренутне надоградње када мрежа пређе на следећу епоху. Овај опциони корак не даје додатну предност у погледу вероватноће блока — само дозвољава глаткији оперативни прелаз.

Блокови који садрже доказе испод минималног нивоа скалирања за њихову висину се сматрају неважећим. Валидатори проверавају декларисани ниво скалирања у доказу у односу на тренутни захтев мреже током валидације консензуса, обезбеђујући да сви учесници испуњавају безбедносна очекивања која се развијају.

---

## 7. Архитектура рударења

PoCX раздваја операције критичне за консензус од ресурсно-интензивних задатака рударења, омогућавајући и безбедност и ефикасност. Чвор одржава блокчејн, валидира блокове, управља mempool-ом и излаже RPC интерфејс. Спољни рудари рукују складиштењем плотова, читањем scoop-ова, израчунавањем квалитета и управљањем роковима. Ово раздвајање одржава логику консензуса једноставном и провереном док дозвољава рударима да оптимизују за пропусност диска.

### 7.1 RPC интерфејс за рударење

Рудари интерагују са чвором кроз минималан скуп RPC позива. get_mining_info RPC обезбеђује тренутну висину блока, генерацијски потпис, базни циљ, циљани рок и прихватљив опсег нивоа скалирања плота. Користећи ове информације, рудари рачунају кандидат nonce-ове. submit_nonce RPC дозвољава рударима да пошаљу предложено решење, укључујући идентификатор плота, индекс nonce-а, ниво скалирања и налог рудара. Чвор евалуира слање и одговара са израчунатим роком ако је доказ важећи.

### 7.2 Планер ковања

Чвор одржава планер ковања, који прати долазећа слања и задржава само најбоље решење за сваку висину блока. Послати nonce-ови се стављају у ред чекања са уграђеним заштитама против напада преплављивања слањима или ускраћивања услуге. Планер чека док израчунати рок не истекне или не стигне супериорно решење, у ком тренутку саставља блок, потписује га користећи ефективни кључ ковања и објављује га мрежи.

### 7.3 Дефанзивно ковање

Да би спречио нападе засноване на времену или подстицаје за манипулацију сатом, PoCX имплементира дефанзивно ковање. Ако конкурентски блок стигне за исту висину, планер упоређује локално решење са новим блоком. Ако је локални квалитет супериоран, чвор кује одмах уместо да чека оригинални рок. Ово обезбеђује да рудари не могу стећи предност само подешавањем локалних сатова; најбоље решење увек превладава, чувајући фер и безбедност мреже.

---

## 8. Анализа безбедности

### 8.1 Модел претњи

PoCX моделира противнике са значајним али ограниченим способностима. Нападачи могу покушати да преоптерете мрежу неважећим трансакцијама, малформираним блоковима или фабрикованим доказима да стресно тестирају путање валидације. Могу слободно манипулисати својим локалним сатовима и могу покушати да експлоатишу граничне случајеве у понашању консензуса као што су руковање временским ознакама, динамика подешавања тежине или правила реорганизације. Од противника се такође очекује да истражују могућности за преписивање историје кроз циљане вилице ланца.

Модел претпоставља да ниједна страна не контролише већину укупног капацитета складиштења мреже. Као и код сваког механизма консензуса заснованог на ресурсима, нападач са 51% капацитета може унилатерално реорганизовати ланац; ово фундаментално ограничење није специфично за PoCX. PoCX такође претпоставља да нападачи не могу рачунати податке плота брже него што поштени рудари могу читати са диска. Распоред скалирања (Одељак 6) обезбеђује да рачунарски јаз потребан за безбедност расте током времена како се хардвер побољшава.

Следећи одељци детаљно испитују сваку главну класу напада и описују противмере уграђене у PoCX.

### 8.2 Напади капацитетом

Као и PoW, нападач са већинским капацитетом може преписати историју (51% напад). Постизање овога захтева стицање физичког отиска складиштења већег од поштене мреже — скуп и логистички захтеван подухват. Када се хардвер набави, оперативни трошкови су ниски, али почетна инвестиција ствара јак економски подстицај да се понаша поштено: подривање ланца би оштетило вредност нападачеве сопствене базе средстава.

PoC такође избегава проблем nothing-at-stake везан за PoS. Иако рудари могу скенирати плотове против више конкурентских вилица, свако скенирање троши реално време — типично реда величине десетина секунди по ланцу. Са 120-секундним интервалом блока, ово инхерентно ограничава рударење на више вилица, и покушај рударења на много вилица истовремено деградира перформансе на свима њима. Рударење на вилици стога није бесплатно; оно је фундаментално ограничено I/O пропусношћу.

Чак и ако би будући хардвер дозволио скоро тренутно скенирање плота (нпр. SSD-ови високе брзине), нападач би и даље био суочен са значајним захтевом за физичке ресурсе да контролише већину капацитета мреже, чинећи напад у стилу 51% скупим и логистички изазовним.

Коначно, нападе капацитетом је далеко теже изнајмити од напада hashpower-ом. GPU рачунање се може набавити на захтев и тренутно преусмерити на било који PoW ланац. Насупрот томе, PoC захтева физички хардвер, временски интензивно плотовање и текуће I/O операције. Ова ограничења чине краткорочне, опортунистичке нападе далеко мање изводљивим.

### 8.3 Напади временом

Време игра критичнију улогу у Proof of Capacity него у Proof of Work. У PoW, временске ознаке примарно утичу на подешавање тежине; у PoC, оне одређују да ли је рок рудара истекао и стога да ли је блок подобан за ковање. Рокови се мере у односу на временску ознаку родитељског блока, али се локални сат чвора користи да просуди да ли долазећи блок лежи сувише далеко у будућности. Из овог разлога PoCX примењује строгу толеранцију временске ознаке: блокови не смеју одступати више од 15 секунди од локалног сата чвора (у поређењу са Bitcoin-овим прозором од 2 сата). Ово ограничење ради у оба смера — блокови сувише далеко у будућности се одбијају, а чворови са спорим сатовима могу нетачно одбити важеће долазеће блокове.

Чворови стога треба да синхронизују своје сатове користећи NTP или еквивалентан извор времена. PoCX намерно избегава ослањање на изворе времена интерне мреже да спречи нападаче од манипулисања перципираним мрежним временом. Чворови надгледају своје сопствено одступање и емитују упозорења ако локални сат почне да дивергира од недавних временских ознака блокова.

Убрзање сата — покретање брзог локалног сата за ковање нешто раније — обезбеђује само маргиналну корист. Унутар дозвољене толеранције, дефанзивно ковање (Одељак 7.3) обезбеђује да ће рудар са бољим решењем одмах објавити при виђењу инфериорног раног блока. Брз сат помаже рудару само да објави већ победничко решење неколико секунди раније; не може конвертовати инфериоран доказ у победнички.

Покушаји манипулисања тежином путем временских ознака су ограничени ±20% ограничењем по блоку и клизним прозором од 24 блока, спречавајући рударе да значајно утичу на тежину кроз краткорочне игре временом.

### 8.4 Напади компромисом времена и меморије

Компромиси времена и меморије покушавају да смање захтеве за складиштење прерачунавањем делова плота на захтев. Претходни Proof of Capacity системи су били рањиви на такве нападе, најзначајније POC1 мана неуравнотежености scoop-ова и POC2 XOR-transpose напад компресије (Одељак 2.4). Оба су експлоатисала асиметрије у томе колико је скупо регенерисати одређене делове података плота, дозвољавајући противницима да смање складиштење док плаћају само малу рачунарску казну. Такође, алтернативни формати плота за PoC2 пате од сличних TMTO слабости; истакнут пример је Chia, чији формат плота може бити произвољно смањен за фактор већи од 4.

PoCX потпуно уклања ове површине напада кроз своју конструкцију nonce-а и warp формат. Унутар сваког nonce-а, финални корак дифузије хешира комплетно израчунат бафер и XOR-ује резултат преко свих бајтова, обезбеђујући да сваки део бафера зависи од сваког другог дела и не може бити скраћен. После тога, POC2 shuffle замењује доње и горње половине сваког scoop-а, изједначавајући рачунарски трошак враћања било ког scoop-а.

PoCX даље елиминише POC2 XOR-transpose напад компресије изводећи свој ојачани X1 формат, где је сваки scoop XOR директне и транспоноване позиције преко упарених warp-ова; ово повезује сваки scoop са целим редом и целом колоном основних X0 података, чинећи реконструкцију захтевом хиљада комплетних nonce-ова и тиме потпуно уклањајући асиметрични компромис времена и меморије.

Као резултат, складиштење комплетног плота је једина рачунарски одржива стратегија за рударе. Ниједна позната пречица — било делимично плотовање, селективна регенерација, структурирана компресија или хибридни приступи рачунања и складиштења — не обезбеђује значајну предност. PoCX обезбеђује да рударење остаје стриктно ограничено складиштењем и да капацитет одражава стварну, физичку посвећеност.

### 8.5 Напади додељивањима

PoCX користи детерминистичку машину стања да управља свим додељивањима плот-ковач. Свако додељивање напредује кроз добро дефинисана стања — UNASSIGNED → ASSIGNING → ASSIGNED → REVOKING → REVOKED — са примењеним кашњењима активације и опозива. Ово обезбеђује да рудар не може тренутно променити додељивања да превари систем или брзо мењати ауторитет ковања.

Пошто сви прелази захтевају криптографске доказе — конкретно, потписе власника плота који су верификабилни у односу на улазни UTXO — мрежа може веровати легитимности сваког додељивања. Покушаји заобилажења машине стања или фалсификовања додељивања се аутоматски одбијају током валидације консензуса. Напади поновног слања се исто тако спречавају стандардним Bitcoin-овим заштитама од поновног слања трансакција, обезбеђујући да је свака акција додељивања јединствено везана за важећи, непотрошени улаз.

Комбинација управљања машином стања, примењених кашњења и криптографског доказа чини варање засновано на додељивањима практично немогућим: рудари не могу отети додељивања, извршити брзо поновно додељивање током трка блокова или заобићи распореде опозива.

### 8.6 Безбедност потписа

Потписи блокова у PoCX служе као критична веза између доказа и ефективног кључа ковања, обезбеђујући да само овлашћени рудари могу производити важеће блокове.

Да би спречили нападе малеабилности, потписи су искључени из израчунавања хеша блока. Ово елиминише ризике малеабилних потписа који би могли подрити валидацију или дозволити нападе замене блокова.

Да би ублажили векторе ускраћивања услуге, величине потписа и јавног кључа су фиксне — 65 бајтова за компактне потписе и 33 бајта за компресоване јавне кључеве — спречавајући нападаче да надувају блокове да изазову исцрпљивање ресурса или успоравање ширења мреже.

---

## 9. Имплементација

PoCX је имплементиран као модуларно проширење Bitcoin Core, са свим релевантним кодом садржаним у свом наменском поддиректоријуму и активираним кроз флаг функције. Овај дизајн чува интегритет оригиналног кода, дозвољавајући да се PoCX омогући или онемогући чисто, што поједностављује тестирање, ревизију и остајање у синхронизацији са upstream променама.

Интеграција додирује само есенцијалне тачке неопходне за подршку Proof of Capacity. Заглавље блока је проширено да укључи PoCX-специфична поља, а валидација консензуса је прилагођена да обрађује доказе засноване на складиштењу заједно са традиционалним Bitcoin провераме. Систем ковања, одговоран за управљање роковима, планирање и слања рудара, је потпуно садржан унутар PoCX модула, док RPC проширења излажу функционалност рударења и додељивања спољним клијентима. За кориснике, интерфејс новчаника је побољшан да управља додељивањима кроз OP_RETURN трансакције, омогућавајући беспрекорну интеракцију са новим функцијама консензуса.

Све операције критичне за консензус су имплементиране у детерминистичком C++ без спољних зависности, обезбеђујући крос-платформску конзистентност. Shabal256 се користи за хеширање, док савијање времена и израчунавање квалитета ослањају на аритметику са фиксном тачком и 256-битне операције. Криптографске операције као што је верификација потписа користе постојећу secp256k1 библиотеку Bitcoin Core.

Изолацијом PoCX функционалности на овај начин, имплементација остаје проверена, одржива и потпуно компатибилна са текућим развојем Bitcoin Core, демонстрирајући да фундаментално нов механизам консензуса заснован на складиштењу може коегзистирати са зрелом proof-of-work кодном базом без нарушавања њеног интегритета или употребљивости.

---

## 10. Мрежни параметри

PoCX гради на Bitcoin-овој мрежној инфраструктури и поново користи њен оквир параметара ланца. Да би подржао рударење засновано на капацитету, интервале блокова, руковање додељивањима и скалирање плотова, неколико параметара је проширено или преписано. Ово укључује циљано време блока, почетну субвенцију, распоред преполовљавања, кашњења активације и опозива додељивања, као и мрежне идентификаторе као што су магични бајтови, портови и Bech32 префикси. Testnet и regtest окружења даље подешавају ове параметре да омогуће брзу итерацију и тестирање ниског капацитета.

Табеле испод сумирају резултујућа mainnet, testnet и regtest подешавања, истичући како PoCX прилагођава Bitcoin-ове основне параметре моделу консензуса заснованом на складиштењу.

### 10.1 Mainnet

| Параметар | Вредност |
|-----------|----------|
| Магични бајтови | `0xa7 0x3c 0x91 0x5e` |
| Подразумевани порт | 8888 |
| Bech32 HRP | `pocx` |
| Циљано време блока | 120 секунди |
| Почетна субвенција | 10 BTC |
| Интервал преполовљавања | 1050000 блокова (~4 године) |
| Укупна понуда | ~21 милион BTC |
| Активација додељивања | 30 блокова |
| Опозив додељивања | 720 блокова |
| Клизни прозор | 24 блока |

### 10.2 Testnet

| Параметар | Вредност |
|-----------|----------|
| Магични бајтови | `0x6d 0xf2 0x48 0xb3` |
| Подразумевани порт | 18888 |
| Bech32 HRP | `tpocx` |
| Циљано време блока | 120 секунди |
| Остали параметри | Исто као mainnet |

### 10.3 Regtest

| Параметар | Вредност |
|-----------|----------|
| Магични бајтови | `0xfa 0xbf 0xb5 0xda` |
| Подразумевани порт | 18444 |
| Bech32 HRP | `rpocx` |
| Циљано време блока | 1 секунда |
| Интервал преполовљавања | 500 блокова |
| Активација додељивања | 4 блока |
| Опозив додељивања | 8 блокова |
| Режим ниског капацитета | Омогућен (~4 MB плотови) |

---

## 11. Повезани радови

Током година, неколико блокчејн и консензус пројеката је истраживало моделе рударења засноване на складиштењу или хибридне моделе. PoCX гради на овом наслеђу уводећи побољшања у безбедности, ефикасности и компатибилности.

**Burstcoin / Signum.** Burstcoin је представио први практичан Proof-of-Capacity (PoC) систем 2014. године, дефинишући основне концепте као што су плотови, nonce-ови, scoop-ови и рударење засновано на роковима. Његови наследници, посебно Signum (раније Burstcoin), проширили су екосистем и на крају еволуирали у оно што је познато као Proof-of-Commitment (PoC+), комбинујући посвећеност складиштењу са опционим staking-ом за утицај на ефективни капацитет. PoCX наслеђује темељ рударења заснованог на складиштењу од ових пројеката, али значајно дивергира кроз ојачани формат плота (XOR-transpose кодирање), динамичко скалирање рада плота, углачавање рокова („савијање времена") и флексибилан систем додељивања — све док се усидрава у кодну базу Bitcoin Core уместо одржавања самосталног форка мреже.

**Chia.** Chia имплементира Proof of Space and Time, комбинујући доказе засноване на диску са временском компонентом примењеном путем Verifiable Delay Functions (VDF-ова). Њен дизајн адресира одређене забринутости око поновне употребе доказа и генерисања свежих изазова, различито од класичног PoC. PoCX не усваја тај временски-усидрен модел доказа; уместо тога, одржава консензус заснован на складиштењу са предвидљивим интервалима, оптимизован за дугорочну компатибилност са UTXO економијом и алатима изведеним из Bitcoin-а.

**Spacemesh.** Spacemesh предлаже Proof-of-Space-Time (PoST) шему користећи топологију мреже засновану на DAG-у (mesh). У овом моделу, учесници морају периодично доказивати да алоцирано складиштење остаје нетакнуто током времена, уместо ослањања на један претпретрачунати скуп података. PoCX, насупрот томе, верификује посвећеност складиштењу само у време блока — са ојачаним форматима плотова и ригорозном валидацијом доказа — избегавајући overhead континуираних доказа складиштења док чува ефикасност и децентрализацију.

---

## 12. Закључак

Bitcoin-PoCX демонстрира да се енергетски ефикасан консензус може интегрисати у Bitcoin Core док чува безбедносне особине и економски модел. Кључни доприноси укључују XOR-transpose кодирање (приморава нападаче да рачунају 4096 nonce-ова по претраживању, елиминишући напад компресије), алгоритам савијања времена (трансформација дистрибуције смањује варијансу времена блока), систем додељивања ковања (делегација заснована на OP_RETURN омогућава рударење у пулу без кустодијалства), динамичко скалирање (усклађено са преполовљавањима да одржи сигурносне маргине), и минималну интеграцију (код означен функцијама изолован у наменском директоријуму).

Систем је тренутно у фази тестне мреже. Снага рударења се изводи из капацитета складиштења уместо hash rate-а, смањујући потрошњу енергије за редове величине док одржава Bitcoin-ов доказани економски модел.

---

## Референце

Bitcoin Core. *Bitcoin Core Repository.* https://github.com/bitcoin/bitcoin

Burstcoin. *Proof of Capacity Technical Documentation.* 2014.

NIST. *SHA-3 Competition: Shabal.* 2008.

Cohen, B., Pietrzak, K. *The Chia Network Blockchain.* 2019.

Spacemesh. *Spacemesh Protocol Documentation.* 2021.

PoC Consortium. *PoCX Framework.* https://github.com/PoC-Consortium/pocx

PoC Consortium. *Bitcoin-PoCX Integration.* https://github.com/PoC-Consortium/bitcoin-pocx

---

**Лиценца**: MIT
**Организација**: Proof of Capacity Consortium
**Статус**: Фаза тестне мреже
